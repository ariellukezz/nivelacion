import{r as c,M as T,i as B,w as i,d as D,o as h,a as r,b as d,Z as L,e,n as S,f as l,t as s,c as x,F as V,l as $,h as q,q as F,p as R,m as A}from"./app-a93df818.js";import{A as M}from"./LayoutSupervisor-00c638c7.js";import{a as y,s as U}from"./column.esm-6c171e8f.js";import{a as z,s as O}from"./index.esm-026799dc.js";import{a as Z}from"./TopMenu-fcce2007.js";import{s as j}from"./breadcrumb.esm-695d2eea.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-1eb66d1d.js";const o=_=>(R("data-v-0e4844ba"),_=_(),A(),_),H={class:"p-4"},J=o(()=>e("h2",{class:"text-xl font-semibold mb-4"},"Búsqueda de Estudiantes",-1)),K={class:"mb-6"},Q={class:"p-input-icon-left w-full"},W=o(()=>e("i",{class:"pi pi-search"},null,-1)),X={class:"cursor-pointer text-primary"},Y={class:"cursor-pointer text-primary"},ee=o(()=>e("div",{class:"text-center py-8"},[e("i",{class:"pi pi-info-circle mr-2"}),l(" No se encontraron resultados ")],-1)),se=o(()=>e("div",{class:"text-center py-8"},[e("i",{class:"pi pi-spinner pi-spin mr-2"}),l(" Cargando datos... ")],-1)),te={key:0,class:"p-4"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae=o(()=>e("h3",{class:"text-lg font-semibold mb-2"},"Información Personal",-1)),le=o(()=>e("strong",null,"Código:",-1)),ne=o(()=>e("strong",null,"DNI:",-1)),ie=o(()=>e("strong",null,"Nombre:",-1)),re=o(()=>e("strong",null,"Sexo:",-1)),de=o(()=>e("strong",null,"Teléfono:",-1)),ce=o(()=>e("strong",null,"Email:",-1)),ue=o(()=>e("strong",null,"Dirección:",-1)),pe=o(()=>e("h3",{class:"text-lg font-semibold mb-2"},"Información Académica",-1)),_e=o(()=>e("strong",null,"Semestre:",-1)),me=o(()=>e("strong",null,"Modalidad:",-1)),ve=o(()=>e("strong",null,"Tipo Examen:",-1)),ge=o(()=>e("strong",null,"Año:",-1)),he=o(()=>e("strong",null,"Programa:",-1)),fe=o(()=>e("strong",null,"Escuela:",-1)),be=o(()=>e("strong",null,"Filial:",-1)),xe={class:"col-span-2"},ye=o(()=>e("h3",{class:"text-lg font-semibold mb-2"},"Competencias",-1)),we={class:"grid grid-cols-2 gap-2"},ke={__name:"index",setup(_){function w(u,n){let p;return function(...I){const N=()=>{clearTimeout(p),u(...I)};clearTimeout(p),p=setTimeout(N,n)}}const k=c([]),f=c([]),v=c(""),g=c(!1),m=c(!1),a=c(null),C=c([{label:"Inicio",icon:"pi pi-home",url:"/"},{label:"Supervisor",icon:"pi pi-user",url:"/supervisor"},{label:"Búsqueda de Estudiantes",icon:"pi pi-search",url:"/estudiantes"}]),b=async(u="")=>{try{g.value=!0;const n=await D.get("busqueda-estudiantes",{params:{search:u}});n.data.success?(k.value=n.data.data,f.value=n.data.data):console.error("Error en la respuesta:",n.data.message)}catch(n){console.error("Error al obtener estudiantes:",n)}finally{g.value=!1}},E=w(()=>{b(v.value)},300),P=u=>{a.value=u,m.value=!0};return T(()=>b()),(u,n)=>{const p=F("router-link");return h(),B(M,null,{default:i(()=>[r(d(L),{title:"Búsqueda de Estudiantes"}),e("div",H,[r(d(j),{model:C.value,class:"mb-4"},{item:i(({item:t})=>[r(p,{to:t.url,class:"text-primary hover:text-primary-dark"},{default:i(()=>[e("i",{class:S([t.icon,"mr-2"])},null,2),l(" "+s(t.label),1)]),_:2},1032,["to"])]),_:1},8,["model"]),J,e("div",K,[e("span",Q,[W,r(d(z),{modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=t=>v.value=t),placeholder:"Buscar por código, DNI, nombres o apellidos...",class:"w-full",onInput:d(E)},null,8,["modelValue","onInput"])])]),r(d(U),{value:f.value,loading:g.value,stripedRows:"",paginator:"",rows:10,rowsPerPageOptions:[10,25,50],class:"p-datatable-sm",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} estudiantes",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",onRowClick:n[1]||(n[1]=t=>P(t.data))},{empty:i(()=>[ee]),loading:i(()=>[se]),default:i(()=>[r(d(y),{field:"codigo_est",header:"Código",sortable:""},{body:i(({data:t})=>[e("span",X,s(t.codigo_est),1)]),_:1}),r(d(y),{field:"nombre_completo",header:"Nombre Completo",sortable:""},{body:i(({data:t})=>[e("span",Y,s(t.paterno)+" "+s(t.materno)+", "+s(t.nombres),1)]),_:1})]),_:1},8,["value","loading"]),r(d(Z),{visible:m.value,"onUpdate:visible":n[3]||(n[3]=t=>m.value=t),header:"Detalles del Estudiante",modal:!0,style:{width:"50vw"},breakpoints:{"960px":"75vw","640px":"100vw"}},{footer:i(()=>[r(d(O),{label:"Cerrar",icon:"pi pi-times",class:"p-button-text",onClick:n[2]||(n[2]=t=>m.value=!1)})]),default:i(()=>[a.value?(h(),x("div",te,[e("div",oe,[e("div",null,[ae,e("p",null,[le,l(" "+s(a.value.codigo_est),1)]),e("p",null,[ne,l(" "+s(a.value.dni),1)]),e("p",null,[ie,l(" "+s(a.value.nombres)+" "+s(a.value.paterno)+" "+s(a.value.materno),1)]),e("p",null,[re,l(" "+s(a.value.sexo),1)]),e("p",null,[de,l(" "+s(a.value.telefono),1)]),e("p",null,[ce,l(" "+s(a.value.email),1)]),e("p",null,[ue,l(" "+s(a.value.direccion),1)])]),e("div",null,[pe,e("p",null,[_e,l(" "+s(a.value.semestre),1)]),e("p",null,[me,l(" "+s(a.value.modalidad),1)]),e("p",null,[ve,l(" "+s(a.value.t_examen),1)]),e("p",null,[ge,l(" "+s(a.value.anio),1)]),e("p",null,[he,l(" "+s(a.value.nombre_programa),1)]),e("p",null,[fe,l(" "+s(a.value.nombre_escuela),1)]),e("p",null,[be,l(" "+s(a.value.filial),1)])]),e("div",xe,[ye,e("div",we,[(h(),x(V,null,$(11,t=>e("p",{key:t},[e("strong",null,"Competencia "+s(t)+":",1),l(" "+s(a.value[`competencia_${t}`]),1)])),64))])])])])):q("",!0)]),_:1},8,["visible"])])]),_:1})}}},Le=G(ke,[["__scopeId","data-v-0e4844ba"]]);export{Le as default};
