import{A as he}from"./AuthenticatedLayout-a1c9cc5d.js";import{r as i,u as _e,g as ge,h,c as p,a as l,b as s,w as u,F as we,o as v,Z as be,d as e,i as z,t as _,f as m,n as D}from"./app-a329af35.js";import{a as f,b as S,s as xe,c as O}from"./NavigationMobile-ca5e61f2.js";import{b as E,s as U,a as d}from"./column.esm-4ca70007.js";import{s as Ve,a as Ce}from"./confirmpopup.esm-2ab03fc2.js";import{s as N}from"./tag.esm-8637022e.js";import"./_plugin-vue_export-helper-c27b6911.js";const ke={class:"flex mb-0",style:{"justify-content":"space-between","align-items":"center","margin-top":"0px","border-bottom":"solid 1px #cdcdcd9D",height:"50px",background:"white"}},je={class:"flex"},Ae={key:0,class:"flex justify-content-center",style:{"align-items":"center"}},ze=e("i",{class:"pi pi-angle-right"},null,-1),De={style:{"max-width":"180px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Se={key:1,class:"flex justify-content-center",style:{"align-items":"center"}},Ee=e("i",{class:"pi pi-angle-right"},null,-1),Ue={style:{"max-width":"180px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Ne={key:0},$e={class:"flex mr-4",style:{"justify-content":"flex-end"}},Be={class:"p-input-icon-left"},Ge=e("i",{class:"pi pi-search"},null,-1),Me={key:1},Ie={class:"flex align-items-center",style:{width:"280px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Le={class:"bg-white shadow-xs p-4",style:{height:"calc(100vh - 140px)","font-family":"Arial, Helvetica, sans-serif"}},Pe={key:0,class:"card"},Te={key:0},qe={class:"flex",style:{"justify-content":"space-between"}},Fe={class:"flex mb-3",style:{"justify-content":"flex-end"}},Ke={class:"p-input-icon-left"},He=e("i",{class:"pi pi-search"},null,-1),Re={class:"mt-3"},Xe={class:"flex",style:{"justify-content":"flex-start"}},Ze={class:"flex",style:{"justify-content":"center"}},Je={key:0},Oe={key:1},Qe={class:"flex"},We={class:"mr-2"},Ye={key:1},et={class:"flex",style:{"justify-content":"space-between"}},tt={class:"flex mb-3",style:{"justify-content":"flex-end"}},lt={class:"p-input-icon-left"},at=e("i",{class:"pi pi-search"},null,-1),st={class:"mt-3"},ot={class:"flex",style:{"justify-content":"center"}},it={key:0},nt={key:1},dt={class:"flex mt-0 mb-3 align-items-center",style:{"justify-content":"flex-end"}},ut=e("label",null,"Estado",-1),rt={class:"ml-3"},ct={class:"flex",style:{width:"100%","justify-content":"space-between"}},pt={class:"mb-3",style:{width:"68%"}},vt=e("div",null,[e("label",null,"Nombre")],-1),mt={class:"mb-3",style:{width:"28%"}},ft=e("div",null,[e("label",null,"Grupo")],-1),yt={class:"flex align-items-center",style:{"font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},ht={class:"flex",style:{width:"100%","justify-content":"space-between"}},_t={class:"mb-3",style:{width:"100%"}},gt=e("div",null,[e("label",null,"Competencia")],-1),wt={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},bt={class:"flex",style:{width:"100%","justify-content":"space-between"}},xt={class:"mb-3",style:{width:"100%"}},Vt=e("div",null,[e("label",null,"Docente")],-1),Ct={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},kt={class:"flex",style:{"justify-content":"flex-end"}},jt={key:0},At={class:"flex",style:{width:"100%","justify-content":"flex-end"}},Gt={__name:"index",setup(zt){const r=i(null),P=_e(),Q=ge(),b=i(null),g=i([]),T=i([]),c=i(null),x=i(""),$=i([]),W=i([]),Y=i(0),q=i(1),V=i(""),C=i(""),k=i([]),j=i(null),ee=i([]),y=i(!1);i(""),i("A");const te=i([{value:"A",label:"Grupo A"},{value:"B",label:"Grupo B"},{value:"C",label:"Grupo C"},{value:"D",label:"Grupo D"},{value:"E",label:"Grupo E"}]),B=i([]),F=i([]),le=i(null),K=i([]),H=i([]),w=i(null),n=i({id:null,nombre:"",id_docente:"",grupo:"A",estado:!0}),G=async()=>{let a=await axios.post("/coordinador/get-docentes?page="+q.value,{term:V.value});ee.value=a.data.datos.data,Y.value=a.data.datos.total},ae=async()=>{let a=await axios.post("/get-programas?page="+q.value,{term:""});W.value=a.data.datos.data},R=async()=>{let a=await axios.post("/get-escuelas",{term:C.value});K.value=a.data.datos.data},se=async()=>{let a=await axios.post("/coordinador/get-competencias?page=",{term:""});$.value=a.data.datos},oe=async()=>{let a=await axios.post("/get-docente-competencia?page=",{term:"",competencia:w.value});F.value=a.data.datos.data,le.value=a.data.datos.data[0].id},A=async()=>{let a=await axios.post("get-cursos?page=",{term:x.value,competencia:j.value,escuela:r.value.escuela});T.value=a.data.datos.data},X=i(!1),ie=async a=>{y.value=!0,X.value=!0,n.value.id=a.id,n.value.nombre=a.nombre,n.value.grupo=a.grupo,n.value.id_docente=a.id_docente,w.value=a.id_competencia,n.value.id=a.id,a.estado===1?n.value.estado=!0:n.value.estado=!1},ne=async()=>{let a=await axios.post("save-curso",{id:n.value.id,nombre:n.value.nombre,id_competencia:w.value,id_docente:n.value.id_docente,escuela:r.value.escuela,grupo:n.value.grupo,estado:n.value.estado});L(a.data.tipo,a.data.titulo,a.data.mensaje),A(),y.value=!1,limpiar()},Z=async()=>{let a=await axios.post("get-detalle-curso?page=",{term:"",curso:c.value.id});H.value=a.data.datos.data,g.value=a.data.registrados.data,k.value=a.data.registrados.data},M=i(null),I=i(null),de=async()=>{ue(),re();let a=await axios.post("asignar-curso-nivelacion",{curso:c.value.id,alumnos:g.value,anteriores:k.value,diferencia:M.value,diferencia2:I.value});L(a.data.tipo,a.data.titulo,a.data.mensaje),Z(),b.value=!1},ue=()=>{M.value=g.value.filter(a=>!k.value.some(t=>t.id===a.id)),console.log("Elementos en array1 que no están en array2:",M.value)},re=()=>{I.value=k.value.filter(a=>!g.value.some(t=>t.id===a.id)),console.log("Elementos en array1 que no están en array2:",I.value)},ce=async a=>{let t=await axios.get("delete-docente/"+a);L(t.data.tipo,t.data.titulo,t.data.mensaje),G()},pe=async()=>{let a=await axios.post("/get-alumnos-registro?page=",{term:"",escuela:r.value.id,curso:c.value.id_competencia});B.value=a.data.datos};h(y,(a,t)=>{X.value==!0&&y.value==!1&&(y.value=!1,n.value.id=null,n.value.nombre=null,n.value.grupo=null,n.value.estado=!0)}),h(C,(a,t)=>{R()}),h(x,(a,t)=>{A()}),h(V,(a,t)=>{G()}),h(w,(a,t)=>{oe()}),h(j,(a,t)=>{A()}),h(r,(a,t)=>{A()}),h(c,(a,t)=>{n.value=c.value,Z(),pe()});const ve=()=>{b.value=!0},L=(a,t,o)=>{P.add({severity:a,summary:t,detail:o,life:3e3})},me=(a,t)=>{Q.require({target:a.currentTarget,message:"¿Estas seguro de eliminar al docente "+t.nombres+"?",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{ce(t.id)},reject:()=>{P.add({severity:"error",summary:"Elimación cancelada",detail:"Se ha cancelado la eliminación del docente "+t.nombres,life:3e3})}})},fe=()=>{r.value=null,c.value=null},ye=()=>{c.value=null};return G(),ae(),se(),R(),(a,t)=>(v(),p(we,null,[l(s(be),{title:"Nivelación"}),l(he,null,{default:u(()=>[e("div",ke,[e("div",je,[l(s(f),{severity:"secondary",style:{"font-size":"0.9rem"},text:"",onClick:fe},{default:u(()=>[z(" Inicio ")]),_:1}),r.value!==null?(v(),p("div",Ae,[ze,l(s(f),{severity:"secondary",onClick:ye,style:{"font-size":"0.9rem"},text:""},{default:u(()=>[e("div",De,[e("span",null,_(r.value.escuela),1)])]),_:1})])):m("",!0),c.value!==null?(v(),p("div",Se,[Ee,l(s(f),{severity:"secondary",style:{"font-size":"0.9rem"},text:""},{default:u(()=>[e("div",Ue,[e("span",null,_(c.value.nombre),1)])]),_:1})])):m("",!0)]),r.value===null?(v(),p("div",Ne,[e("div",$e,[e("span",Be,[Ge,l(s(S),{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=o=>C.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])):m("",!0),r.value!==null&&c.value===null?(v(),p("div",Me,[l(s(E),{modelValue:j.value,"onUpdate:modelValue":t[1]||(t[1]=o=>j.value=o),options:$.value,severity:"primary",optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"325px",height:"38px"},class:"w-full md:w-11rem mr-4"},{option:u(o=>[e("div",Ie,[e("div",null,_(o.option.label),1)])]),_:1},8,["modelValue","options"])])):m("",!0)]),e("div",Le,[e("div",null,[r.value===null?(v(),p("div",Pe,[l(s(U),{selection:r.value,"onUpdate:selection":t[2]||(t[2]=o=>r.value=o),selectionMode:"single",value:K.value,class:D("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:10,filters:a.filters},{default:u(()=>[l(s(d),{field:"escuela",header:"Escuela"}),l(s(d),{field:"facultad",header:"Facultad"}),l(s(d),{field:"area",header:"Area"})]),_:1},8,["selection","value","filters"])])):m("",!0)]),r.value!==null&&c.value===null?(v(),p("div",Te,[e("div",qe,[l(s(f),{severity:"primary",onClick:t[3]||(t[3]=o=>y.value=!0),style:{height:"40px"}},{default:u(()=>[z(" Nuevo Curso ")]),_:1}),e("div",null,[e("div",Fe,[e("span",Ke,[He,l(s(S),{modelValue:x.value,"onUpdate:modelValue":t[4]||(t[4]=o=>x.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])]),e("div",Re,[l(s(U),{selection:c.value,"onUpdate:selection":t[5]||(t[5]=o=>c.value=o),selectionMode:"single",value:T.value,class:D("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:u(()=>[l(s(d),{field:"nombre",header:"Nombre"}),l(s(d),{field:"competencia",header:"Curso"}),l(s(d),{field:"docente",header:"Docente"},{body:u(({data:o})=>[e("div",Xe,[e("div",null,_(o.docente),1)])]),_:1}),l(s(d),{field:"grupo",header:"Grupo"}),l(s(d),{field:"escuela",header:"Escuela Prof."}),l(s(d),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Estado",width:"70px"},{body:u(({data:o})=>[e("div",Ze,[o.estado===1?(v(),p("div",Je,[l(s(N),{severity:"info",value:"Activo"})])):m("",!0),o.estado===0?(v(),p("div",Oe,[l(s(N),{style:{background:"#CDCDCD"},value:"Inactivo"})])):m("",!0)])]),_:1}),l(s(d),{field:"id_programa",header:"Acciones",width:"90px"},{body:u(({data:o})=>[e("div",Qe,[e("div",We,[l(s(f),{class:"secondary",icon:"pi pi-pencil","aria-label":"Submit",onClick:J=>ie(o),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])]),l(s(f),{icon:"pi pi-trash",severity:"danger","aria-label":"Submit",onClick:J=>me(J,o),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value"])])])):m("",!0),r.value!==null&&c.value!==null?(v(),p("div",Ye,[e("div",et,[l(s(f),{severity:"primary",onClick:t[6]||(t[6]=o=>ve()),style:{height:"40px"}},{default:u(()=>[z(" Seleccionar ")]),_:1}),e("div",null,[e("div",tt,[e("span",lt,[at,l(s(S),{modelValue:V.value,"onUpdate:modelValue":t[7]||(t[7]=o=>V.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])]),e("div",st,[l(s(U),{selectionMode:"single",value:H.value,class:D("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:u(()=>[l(s(d),{field:"dni",header:"DNI"}),l(s(d),{field:"nombres",header:"Nombres"}),l(s(d),{field:"paterno",header:"Paterno"}),l(s(d),{field:"materno",header:"Materno"}),l(s(d),{field:"curso",header:"Curso"}),l(s(d),{field:"nota",header:"Nota"}),l(s(d),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Condición",width:"70px"},{body:u(({data:o})=>[e("div",ot,[o.nota>=10.5?(v(),p("div",it,[l(s(N),{severity:"info",value:"Aprobado"})])):m("",!0),o.nota<=10.49?(v(),p("div",nt,[l(s(N),{severity:"danger",value:"Desprobado"})])):m("",!0)])]),_:1})]),_:1},8,["value"])])])):m("",!0),l(s(xe)),l(s(Ve)),l(s(O),{visible:y.value,"onUpdate:visible":t[14]||(t[14]=o=>y.value=o),modal:"",header:n.value.id?"Editar Curso":"Curso nuevo",style:{width:"500px"}},{footer:u(()=>[e("div",kt,[e("div",null,[l(s(f),{label:"Cancelar",outlined:"",onClick:t[13]||(t[13]=o=>y.value=!1),size:"small"})]),l(s(f),{label:"Guardar",onClick:ne,size:"small"})])]),default:u(()=>[e("div",dt,[ut,e("div",rt,[l(s(Ce),{modelValue:n.value.estado,"onUpdate:modelValue":t[8]||(t[8]=o=>n.value.estado=o)},null,8,["modelValue"])])]),e("div",ct,[e("div",pt,[vt,l(s(S),{style:{width:"100%",height:"40px"},type:"text",modelValue:n.value.nombre,"onUpdate:modelValue":t[9]||(t[9]=o=>n.value.nombre=o)},null,8,["modelValue"])]),e("div",mt,[ft,l(s(E),{modelValue:n.value.grupo,"onUpdate:modelValue":t[10]||(t[10]=o=>n.value.grupo=o),options:te.value,optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(o=>[e("div",yt,[e("div",null,_(o.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",ht,[e("div",_t,[gt,l(s(E),{modelValue:w.value,"onUpdate:modelValue":t[11]||(t[11]=o=>w.value=o),options:$.value,optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(o=>[e("div",wt,[e("div",null,_(o.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",bt,[e("div",xt,[Vt,l(s(E),{modelValue:n.value.id_docente,"onUpdate:modelValue":t[12]||(t[12]=o=>n.value.id_docente=o),options:F.value,filter:"",optionLabel:"nombres",optionValue:"id",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(o=>[e("div",Ct,[e("div",null,_(o.option.nombres),1)])]),_:1},8,["modelValue","options"])])])]),_:1},8,["visible","header"]),l(s(O),{visible:b.value,"onUpdate:visible":t[16]||(t[16]=o=>b.value=o),modal:"",header:"Asignar Alumnos",style:{width:"900px"}},{default:u(()=>[B.value?(v(),p("div",jt,[l(s(U),{selection:g.value,"onUpdate:selection":t[15]||(t[15]=o=>g.value=o),selectionMode:"multiple",dataKey:"id",metaKeySelection:!1,"row-selection":!1,value:B.value,class:D("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:u(()=>[l(s(d),{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(s(d),{field:"programa",header:"Programa"}),l(s(d),{field:"dni",header:"DNI"}),l(s(d),{field:"nombres",header:"Nombres"}),l(s(d),{field:"paterno",header:"Paterno"}),l(s(d),{field:"materno",header:"Materno"})]),_:1},8,["selection","value"])])):m("",!0),e("div",At,[l(s(f),{severity:"primary",style:{"font-size":"0.9rem"},text:"",onClick:de},{default:u(()=>[z(" Asignar ")]),_:1})])]),_:1},8,["visible"])])]),_:1})],64))}};export{Gt as default};
