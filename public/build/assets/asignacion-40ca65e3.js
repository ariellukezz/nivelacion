import{A as j}from"./LayoutSupervisor-5b8c5111.js";import{o as h,c as U,n as D,u as Y,r as i,j as Z,k as O,a,b as l,w as n,F as J,Z as Q,e as t,t as R,i as P,h as g}from"./app-ae1c9c93.js";import{b as w,s as W,a as v}from"./column.esm-a02f2833.js";import{a as I,b as q,c as K,s as X}from"./TopMenu-1faa5edf.js";import{s as ee}from"./confirmdialog.esm-7b6ead95.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-705764e2.js";var L={name:"Textarea",emits:["update:modelValue"],props:{modelValue:null,autoResize:Boolean},mounted(){this.$el.offsetParent&&this.autoResize&&this.resize()},updated(){this.$el.offsetParent&&this.autoResize&&this.resize()},methods:{resize(){const u=window.getComputedStyle(this.$el);this.$el.style.height="auto",this.$el.style.height=`calc(${u.borderTopWidth} + ${u.borderBottomWidth} + ${this.$el.scrollHeight}px)`,parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden"},onInput(u){this.autoResize&&this.resize(),this.$emit("update:modelValue",u.target.value)}},computed:{filled(){return this.modelValue!=null&&this.modelValue.toString().length>0}}};const le=["value"];function ae(u,m,c,d,p,A){return h(),U("textarea",{class:D(["p-inputtextarea p-inputtext p-component",{"p-filled":A.filled,"p-inputtextarea-resizable ":c.autoResize}]),value:c.modelValue,onInput:m[0]||(m[0]=(...b)=>A.onInput&&A.onInput(...b))},null,42,le)}function te(u,m){m===void 0&&(m={});var c=m.insertAt;if(!(!u||typeof document>"u")){var d=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.type="text/css",c==="top"&&d.firstChild?d.insertBefore(p,d.firstChild):d.appendChild(p),p.styleSheet?p.styleSheet.cssText=u:p.appendChild(document.createTextNode(u))}}var oe=`
.p-inputtextarea-resizable {
    overflow: hidden;
    resize: none;
}
.p-fluid .p-inputtextarea {
    width: 100%;
}
`;te(oe);L.render=ae;const ie={class:"flex justify-between items-start"},se={class:"flex flex-wrap items-start",style:{gap:"1rem"}},ne={class:"mb-3",style:{width:"240px"}},de={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},re={class:"mb-3",style:{width:"240px"}},ue={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},ce={class:"mb-3",style:{width:"240px"}},pe={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},ve={class:"p-input-icon-left"},Ie=t("i",{class:"pi pi-search"},null,-1),me={class:"mt-3"},he=t("i",{class:"pi pi-download",style:{color:"green"}},null,-1),be={class:"flex"},Ne={class:"mr-2"},Ae={class:"flex"},Oe={class:"mr-2"},Ee={key:0},fe={key:1},Ce={key:2},ye={class:"mr-2"},Ue=t("div",null,null,-1),Re={class:"w-full"},we={class:"flex justify-end"},Ve={__name:"asignacion",setup(u){const m=Y(),c=(s,o,e)=>{m.add({severity:s,summary:o,detail:e,life:3e3})},d=i(!1),p=Z(),A=i(1),b=i(null),E=i(null),f=i(null),C=i(null),_=i(null),S=i(0),T=i([]),G=i(10),V=i([{value:"2024-I",label:"2024-I"},{value:"2024-II",label:"2024-II"},{value:"2025-I",label:"2025-I"}]),$=i([{value:"Dictantes",label:"Dictantes"},{value:"Informe",label:"Informe"},{value:"Plan",label:"Plan"},{value:"Resolucion",label:"Resolucion"},{value:"Otro",label:"Otro"}]);i([{value:1,label:"Aceptado"},{value:0,label:"Rechazado"},{value:null,label:"Pendiente"}]);const r=async()=>{let s=await axios.post("get-documentos?page="+A.value,{term:b.value,paginashoja:G.value,programa:E.value,periodo:f.value,tipo:C.value,aceptado:_.value});T.value=s.data.datos.data,S.value=s.data.datos.total},z=s=>{window.open("../"+s,"_blank")},y=i({}),M=async()=>{await axios.post("observar-documento",y.value),r(),c("info","DOCUMENTO OBSERVADO",""),d.value=!1,y.value={}},x=async s=>{await axios.post("cambiar-estado-documento",s),r(),c("info","ESTADO MODIFICADO","")},k=s=>{p.require({message:"¿Está seguro de cambiar el período?",header:"Confirmar cambio de período",icon:"pi pi-exclamation-triangle",accept:async()=>{try{await axios.post("cambiar-periodo-documento",{id:s.id,periodo:s.periodo}),r(),c("info","PERIODO MODIFICADO","")}catch{c("error","ERROR","No se pudo cambiar el periodo.")}},reject:()=>{c("info","Cambio cancelado","No se realizó ningún cambio.")}})},B=s=>{d.value=!0,y.value=s},F=()=>{E.value=null,f.value=null,C.value=null,_.value=null,b.value=null,r()};O(b,()=>{r()}),O(E,()=>{r()}),O(f,()=>{r()}),O(C,()=>{r()}),O(_,()=>{r()}),O(G,()=>{r()});const H=i([{value:1,label:"INGENIERIA AGRONOMICA - PUNO"},{value:2,label:"INGENIERIA AGROINDUSTRIAL - PUNO"},{value:3,label:"INGENIERIA TOPOGRAFICA Y AGRIMENSURA - PUNO"},{value:4,label:"MEDICINA VETERINARIA Y ZOOTECNIA - PUNO"},{value:5,label:"INGENIERIA ECONOMICA - PUNO"},{value:6,label:"CIENCIAS CONTABLES - PUNO"},{value:7,label:"ADMINISTRACION - PUNO"},{value:8,label:"TRABAJO SOCIAL - PUNO"},{value:9,label:"ENFERMERIA - PUNO"},{value:10,label:"INGENIERIA DE MINAS - PUNO"},{value:11,label:"HUMANIDADES - PUNO"},{value:12,label:"SOCIOLOGIA - PUNO"},{value:13,label:"TURISMO - PUNO"},{value:14,label:"ANTROPOLOGIA - PUNO"},{value:15,label:"CIENCIAS DE LA COMUNICACION SOCIAL - PUNO"},{value:16,label:"ARTE - PUNO"},{value:17,label:"BIOLOGIA - PUNO"},{value:18,label:"EDUCACION SECUNDARIA - PUNO"},{value:19,label:"EDUCACION PRIMARIA - PUNO"},{value:20,label:"EDUCACION INICIAL - PUNO"},{value:21,label:"EDUCACION FISICA - PUNO"},{value:22,label:"INGENIERIA ESTADISTICA E INFORMATICA - PUNO"},{value:23,label:"DERECHO - PUNO"},{value:24,label:"INGENIERIA QUIMICA - PUNO"},{value:25,label:"ODONTOLOGIA - PUNO"},{value:26,label:"NUTRICION HUMANA - PUNO"},{value:27,label:"INGENIERIA GEOLOGICA - PUNO"},{value:28,label:"INGENIERIA METALURGICA - PUNO"},{value:29,label:"INGENIERIA CIVIL - PUNO"},{value:30,label:"ARQUITECTURA Y URBANISMO - PUNO"},{value:31,label:"CIENCIAS FISICO MATEMATICAS - PUNO"},{value:32,label:"INGENIERIA AGRICOLA - PUNO"},{value:33,label:"MEDICINA HUMANA - PUNO"},{value:34,label:"INGENIERIA MECANICA ELECTRICA - PUNO"},{value:35,label:"INGENIERIA ELECTRONICA - PUNO"},{value:36,label:"INGENIERIA DE SISTEMAS - PUNO"},{value:37,label:"PSICOLOGIA - PUNO"},{value:38,label:"INGENIERIA ECONOMICA - AZANGARO"},{value:39,label:"INGENIERIA DE MINAS - AZANGARO"},{value:40,label:"INGENIERIA TELECOMUNICACIONES - AZANGARO"},{value:41,label:"CIENCIAS CONTABLES - JULI"},{value:42,label:"ARQUITECTURA Y URBANISMO - JULI"},{value:43,label:"INGENIERIA AGROINDUSTRIAL - JULI"}]);return r(),(s,o)=>(h(),U(J,null,[a(l(Q),{title:"Documentos"}),a(j,null,{default:n(()=>[t("div",ie,[a(l(ee)),t("div",se,[t("div",ne,[a(l(w),{modelValue:E.value,"onUpdate:modelValue":o[0]||(o[0]=e=>E.value=e),options:H.value,filter:"",optionLabel:"label",optionValue:"value",placeholder:"Seleccione escuela profesional",style:{width:"100%"},class:"w-full md:w-11rem"},{option:n(e=>[t("div",de,[t("div",null,R(e.option.label),1)])]),_:1},8,["modelValue","options"])]),t("div",re,[a(l(w),{modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=e=>f.value=e),options:V.value,filter:"",optionLabel:"label",optionValue:"value",placeholder:"Seleccione periodo",style:{width:"100%"},class:"w-full md:w-11rem"},{option:n(e=>[t("div",ue,[t("div",null,R(e.option.label),1)])]),_:1},8,["modelValue","options"])]),t("div",ce,[a(l(w),{modelValue:C.value,"onUpdate:modelValue":o[2]||(o[2]=e=>C.value=e),options:$.value,filter:"",optionLabel:"label",optionValue:"value",placeholder:"Seleccione tipo de documento",style:{width:"100%"},class:"w-full md:w-11rem"},{option:n(e=>[t("div",pe,[t("div",null,R(e.option.label),1)])]),_:1},8,["modelValue","options"])]),a(l(I),{label:"Limpiar filtros",icon:"pi pi-filter-slash",class:"p-button-secondary",onClick:F})]),t("div",null,[t("span",ve,[Ie,a(l(q),{modelValue:b.value,"onUpdate:modelValue":o[3]||(o[3]=e=>b.value=e),placeholder:"Buscar"},null,8,["modelValue"])])])]),t("div",me,[a(l(W),{showGridlines:!1,value:T.value,paginator:"",rows:10,totalRecords:S.value,rowsPerPageOptions:[10,20,50],currentPage:A.value,class:D("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"}},{default:n(()=>[a(l(v),{field:"periodo",header:"Periodo"}),a(l(v),{field:"periodo",header:"Periodo Mod",width:"150px"},{body:n(({data:e})=>[a(l(w),{modelValue:e.periodo,"onUpdate:modelValue":N=>e.periodo=N,options:V.value,optionLabel:"label",optionValue:"value",placeholder:"Seleccione periodo",onChange:N=>k(e),style:{width:"100%"},class:"w-full md:w-11rem"},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1}),a(l(v),{field:"tipo",header:"TIPO"}),a(l(v),{field:"escuela",header:"ESCUELA PROFESIONAL"}),a(l(v),{field:"fecha_subida",header:"FECHA"}),a(l(v),{field:"username",header:"USUARIO"}),a(l(v),{field:"url",header:"Ver Documento",style:{"min-width":"12rem"}},{body:n(({data:e})=>[a(l(I),{label:"Link",onClick:N=>z(e.url),link:""},{default:n(()=>[he]),_:2},1032,["onClick"])]),_:1}),a(l(v),{field:"id_programa",header:"Estado",width:"90px"},{body:n(({data:e})=>[t("div",be,[t("div",Ne,[e.aceptado===1?(h(),P(l(I),{key:0,severity:"success",label:"Aceptado","aria-label":"Submit",size:"small",style:{width:"90px",height:"25px"}})):e.aceptado===0?(h(),P(l(I),{key:1,severity:"danger",label:"Rechazado","aria-label":"Submit",size:"small",style:{width:"90px",height:"25px"}})):(h(),P(l(I),{key:2,severity:"secondary",label:"Pendiente","aria-label":"Submit",size:"small",style:{width:"90px",height:"25px"}}))])])]),_:1}),a(l(v),{header:"Observaciones"},{body:n(({data:e})=>[t("div",null,R(e.obser),1)]),_:1}),a(l(v),{field:"id_programa",header:"Acciones",width:"90px"},{body:n(({data:e})=>[t("div",Ae,[t("div",Oe,[e.aceptado==1?(h(),U("div",Ee,[a(l(I),{severity:"success",icon:"pi pi-check","aria-label":"Submit",onClick:N=>x(e),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])):g("",!0),e.aceptado==0?(h(),U("div",fe,[a(l(I),{severity:"danger",icon:"pi pi-times","aria-label":"Submit",onClick:N=>x(e),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])):g("",!0),e.aceptado==null?(h(),U("div",Ce,[a(l(I),{severity:"secondary",icon:"pi pi-spinner",label:"",onClick:N=>x(e),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])):g("",!0)]),t("div",ye,[a(l(I),{class:"secondary",icon:"pi pi-pencil","aria-label":"Submit",onClick:N=>B(e),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])])]),_:1})]),_:1},8,["value","totalRecords","currentPage"]),Ue]),a(l(K),{visible:d.value,"onUpdate:visible":o[6]||(o[6]=e=>d.value=e),modal:"",header:"Observación",style:{width:"25rem"}},{footer:n(()=>[t("div",we,[a(l(I),{icon:"pi pi-save",label:"Observar",severity:"success","aria-label":"Submit",onClick:o[5]||(o[5]=e=>M()),size:"small",style:{height:"25px"}})])]),default:n(()=>[t("div",Re,[t("div",null,[a(l(L),{modelValue:y.value.obser,"onUpdate:modelValue":o[4]||(o[4]=e=>y.value.obser=e),style:{width:"100%"},variant:"filled",rows:"6"},null,8,["modelValue"])])])]),_:1},8,["visible"]),a(l(X))]),_:1})],64))}};export{Ve as default};
