import{r as a,i as O,w as S,d as I,o as d,e,x as f,a7 as $,c as r,l as y,F as v,a8 as A,a as D,b as L,t as l}from"./app-9957fcc0.js";import{A as N}from"./LayoutSupervisor-fa40699c.js";import{X as h}from"./xlsx-4fdd4c8a.js";import{s as P}from"./index.esm-b6b36824.js";import"./TopMenu-5fc87428.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-c81f6204.js";const V={class:"p-4",style:{background:"white"}},j={class:"flex justify-between mb-2"},z=e("label",{for:"programa"},"Programa de Estudio: ",-1),F=["value"],M=e("label",{for:"busqueda"},"Buscar por Nombre o DNIcodis: ",-1),R={style:{"border-radius":"4px",width:"100%",overflow:"hidden"}},U=e("thead",{style:{height:"30px",color:"white","background-color":"var(--primary-color)",padding:"0px 10px"}},[e("tr",{style:{"font-size":".9rem"}},[e("th",{style:{border:"1px solid #d9d9d9"}},"CODIGO"),e("th",{style:{border:"1px solid #d9d9d9"}},"APELLIDOS Y NOMBRES"),e("th",{style:{border:"1px solid #d9d9d9"}},"UBICACION"),e("th",{style:{border:"1px solid #d9d9d9"}},"PROGRAMA DE ESTUDIO"),e("th",{style:{border:"1px solid #d9d9d9"}},"INGRESO"),e("th",{style:{border:"1px solid #d9d9d9"}},"C1"),e("th",{style:{border:"1px solid #d9d9d9"}},"C2"),e("th",{style:{border:"1px solid #d9d9d9"}},"C3"),e("th",{style:{border:"1px solid #d9d9d9"}},"C4"),e("th",{style:{border:"1px solid #d9d9d9"}},"C5"),e("th",{style:{border:"1px solid #d9d9d9"}},"C6"),e("th",{style:{border:"1px solid #d9d9d9"}},"C7"),e("th",{style:{border:"1px solid #d9d9d9"}},"C8"),e("th",{style:{border:"1px solid #d9d9d9"}},"C9"),e("th",{style:{border:"1px solid #d9d9d9"}},"C10"),e("th",{style:{border:"1px solid #d9d9d9"}},"C11")])],-1),q={style:{border:"1px solid #d9d9d9","font-weight":".8rem","text-align":"center"}},G={class:"pl-1 pr-1"},X={style:{border:"1px solid #d9d9d9","font-weight":".7rem"}},T={class:"pl-1 pr-1"},Y={style:{border:"1px solid #d9d9d9","font-weight":".8rem","text-align":"center"}},H={class:"pl-1 pr-1"},J={style:{border:"1px solid #d9d9d9","font-weight":".8rem","text-align":"center"}},K={class:"pl-1 pr-1"},Q={style:{border:"1px solid #d9d9d9","font-weight":".8rem","text-align":"center"}},W={class:"pl-1 pr-1"},Z={key:0,style:{"text-align":"center"}},ee={key:0},te={key:1},oe=e("span",{style:{"font-size":".9rem"}},null,-1),se=[oe],de={key:1,style:{"text-align":"center"}},he={__name:"index",setup(re){function i(o,s){for(var t=0;t<o.length;t++)if(o[t].competencia===s)return t;return null}const m=a(1),_=a([]),x=a([]),c=a([]),u=a(""),p=a(""),g=a([]),w=async()=>{let o=await I.get("notasperf-supervisor?page="+m.value,{term:""});_.value=o.data.datos,C(),c.value.length>0&&(u.value=c.value[0],b())},C=()=>{const o=new Set;_.value.forEach(s=>{o.add(s.programa)}),c.value=Array.from(o)},b=()=>{x.value=_.value.filter(o=>o.programa===u.value&&(o.codigo_est.includes(p.value)||`${o.paterno} ${o.materno} ${o.nombre}`.toLowerCase().includes(p.value.toLowerCase()))),k()},k=()=>{g.value=x.value.map(o=>{const s={codigo_est:o.codigo_est,programa:o.programa,semestre:o.semestre,filial:o.filial,nombreCompleto:`${o.paterno} ${o.materno},  ${o.nombre}`};for(let t=1;t<=11;t++){const n=i(o.notas,t);n!==null?s[`C${t}`]=o.notas[n].nota:s[`C${t}`]="--"}return s})},E=()=>{const o=h.utils.json_to_sheet(g.value),s=h.utils.book_new();h.utils.book_append_sheet(s,o,"Estudiantes"),h.writeFile(s,"estudiantes.xlsx")};return w(),(o,s)=>(d(),O(N,null,{default:S(()=>[e("div",V,[e("div",j,[e("div",null,[z,f(e("select",{id:"programa","onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),onChange:b},[(d(!0),r(v,null,y(c.value,t=>(d(),r("option",{key:t,value:t},l(t),9,F))),128))],544),[[$,u.value]])]),e("div",null,[M,f(e("input",{id:"busqueda","onUpdate:modelValue":s[1]||(s[1]=t=>p.value=t),onInput:b,type:"text",placeholder:"Buscar..."},null,544),[[A,p.value]])]),D(L(P),{label:"Exportar excel",onClick:E,size:"small",style:{height:"40px"}})]),e("table",R,[U,e("tbody",null,[(d(!0),r(v,null,y(x.value,t=>(d(),r("tr",{key:t.id,style:{"font-size":".9rem"}},[e("td",q,[e("div",G,l(t.codigo_est),1)]),e("td",X,[e("div",T,l(t.paterno)+" "+l(t.materno)+", "+l(t.nombre),1)]),e("td",Y,[e("div",H,l(t.filial),1)]),e("td",J,[e("div",K,l(t.programa),1)]),e("td",Q,[e("div",W,l(t.semestre),1)]),(d(),r(v,null,y(11,(n,B)=>e("td",{key:B,style:{border:"1px solid #d9d9d9","min-width":"40px"}},[i(t.notas,n)!==null?(d(),r("div",Z,[t.notas[i(t.notas,n)]?(d(),r("div",ee,l(t.notas[i(t.notas,n)].nota),1)):(d(),r("div",te,se))])):(d(),r("div",de," - - "))])),64))]))),128))])])])]),_:1}))}};export{he as default};
