import{A as we}from"./AuthenticatedLayout-1dc98ca2.js";import{r as n,u as Ce,i as Ee,j as m,c as v,a,b as t,w as u,F as xe,o as p,Z as Ne,e,f as C,t as b,h as f,n as R}from"./app-4428c3e3.js";import{a as I,b as T,s as Oe,c as X}from"./TopMenu-3f0741e9.js";import{b as E,s as G,a as d}from"./column.esm-3c2c1390.js";import{s as Ve,a as Se}from"./confirmpopup.esm-dd9f747e.js";import{s as M}from"./tag.esm-128c039d.js";import{s as Re}from"./message.esm-dc1cf53a.js";import"./_plugin-vue_export-helper-c27b6911.js";const Te={class:"flex mb-0",style:{"justify-content":"space-between","align-items":"center","margin-top":"0px","border-bottom":"solid 1px #cdcdcd9D",height:"50px",background:"white"}},Ge={class:"flex"},Me={key:0,class:"flex justify-content-center",style:{"align-items":"center"}},De=e("i",{class:"pi pi-angle-right"},null,-1),Ue={style:{"max-width":"180px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Le={key:1,class:"flex justify-content-center",style:{"align-items":"center"}},ke=e("i",{class:"pi pi-angle-right"},null,-1),je={style:{"max-width":"180px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},ze={key:0},Be={class:"flex mr-4",style:{"justify-content":"flex-end"}},Pe={class:"p-input-icon-left"},Fe=e("i",{class:"pi pi-search"},null,-1),$e={key:1},Ye={class:"flex align-items-center",style:{width:"280px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},He={class:"bg-white shadow-xs p-4",style:{height:"calc(100vh - 140px)","font-family":"Arial, Helvetica, sans-serif"}},qe={key:0,class:"card"},Qe={key:0},Ze={class:"flex",style:{"justify-content":"space-between"}},Ke={class:"flex mb-3",style:{"justify-content":"flex-end"}},Je={class:"p-input-icon-left"},Xe=e("i",{class:"pi pi-search"},null,-1),We={class:"card"},el={class:"mt-3"},ll={class:"flex",style:{"justify-content":"flex-start"}},al={class:"flex",style:{"justify-content":"center"}},tl={key:0},sl={class:"flex",style:{"justify-content":"center"}},ol={key:0},il={key:1},nl={class:"flex"},dl={class:"mr-2"},ul={key:1},rl={class:"flex",style:{"justify-content":"space-between"}},cl={class:"flex mb-3",style:{"justify-content":"flex-end"}},vl={class:"p-input-icon-left"},pl=e("i",{class:"pi pi-search"},null,-1),ml={class:"mt-3"},fl={class:"flex",style:{"justify-content":"center"}},Il={key:0},yl={key:1},hl={class:"flex mt-0 mb-3 align-items-center",style:{"justify-content":"flex-end"}},bl=e("label",null,"Estado",-1),_l={class:"ml-3"},Al={class:"flex",style:{width:"100%","justify-content":"space-between"}},gl={class:"mb-3",style:{width:"68%"}},wl=e("div",null,[e("label",null,"Nombre del Curso.")],-1),Cl={class:"mb-3",style:{width:"28%"}},El=e("div",null,[e("label",null,"Grupo")],-1),xl={class:"flex align-items-center",style:{"font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Nl={class:"flex",style:{width:"100%","justify-content":"space-between"}},Ol={class:"mb-3",style:{width:"100%"}},Vl=e("div",null,[e("label",null,"Competencia")],-1),Sl={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Rl={class:"flex",style:{width:"100%","justify-content":"space-between"}},Tl={class:"mb-3",style:{width:"100%"}},Gl=e("div",null,[e("label",null,"Programa de estudio")],-1),Ml={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Dl={class:"flex",style:{width:"100%","justify-content":"space-between"}},Ul={class:"mb-3",style:{width:"100%"}},Ll=e("div",null,[e("label",null,"Docente")],-1),kl={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},jl={class:"flex",style:{"justify-content":"flex-end"}},zl={key:0},Bl={class:"flex",style:{width:"100%","justify-content":"flex-end"}},Jl={__name:"index",setup(Pl){const r=n(null),W=n(null),$=Ce(),ee=Ee(),x=n(null),_=n([]),D=n([]),c=n(null),N=n(""),U=n([]),le=n([]),ae=n(0),Y=n(1),O=n(""),V=n(""),g=n([]),S=n(null),te=n([]),y=n(!1);n(""),n("A");const se=n([{value:"A",label:"Grupo A"},{value:"B",label:"Grupo B"},{value:"C",label:"Grupo C"},{value:"D",label:"Grupo D"},{value:"E",label:"Grupo E"}]),A=n(null),oe=n([{value:1,label:"INGENIERIA AGRONOMICA"},{value:2,label:"INGENIERIA AGROINDUSTRIAL"},{value:3,label:"INGENIERIA TOPOGRAFICA Y AGRIMENSURA"},{value:4,label:"MEDICINA VETERINARIA Y ZOOTECNIA"},{value:5,label:"INGENIERIA ECONOMICA"},{value:6,label:"CIENCIAS CONTABLES"},{value:7,label:"ADMINISTRACION"},{value:8,label:"TRABAJO SOCIAL"},{value:9,label:"ENFERMERIA"},{value:10,label:"INGENIERIA DE MINAS"},{value:11,label:"HUMANIDADES"},{value:12,label:"SOCIOLOGIA"},{value:13,label:"TURISMO"},{value:14,label:"ANTROPOLOGIA"},{value:15,label:"CIENCIAS DE LA COMUNICACION SOCIAL"},{value:16,label:"ARTE: ARTES PLASTICAS"},{value:17,label:"ARTE: MUSICA"},{value:18,label:"ARTE: DANZA"},{value:19,label:"BIOLOGIA: ECOLOGIA"},{value:20,label:"BIOLOGIA: MICROBIOLOGIA Y LABORATORIO CLINICO"},{value:21,label:"BIOLOGIA: PESQUERIA"},{value:22,label:"EDUC. SEC.: CIENCIA, TECNOLOGIA Y AMBIENTE"},{value:23,label:"EDUC. SEC.: CIENCIAS SOCIALES"},{value:24,label:"EDUC. SEC.: LIT. PSICOLOGIA Y FILOSOFIA"},{value:25,label:"EDUC. SEC.: MATEMATICA, FISICA, COMP. E INFORMATICA"},{value:26,label:"EDUCACION PRIMARIA"},{value:27,label:"EDUCACION INICIAL"},{value:28,label:"EDUCACION FISICA"},{value:29,label:"INGENIERIA ESTADISTICA E INFORMATICA"},{value:30,label:"DERECHO"},{value:31,label:"INGENIERIA QUIMICA"},{value:32,label:"ODONTOLOGIA"},{value:33,label:"NUTRICION HUMANA"},{value:34,label:"INGENIERIA GEOLOGICA"},{value:35,label:"INGENIERIA METALURGICA"},{value:36,label:"INGENIERIA CIVIL"},{value:37,label:"ARQUITECTURA Y URBANISMO"},{value:38,label:"CIENCIAS FISICO MATEMATICAS: FISICA"},{value:39,label:"CIENCIAS FISICO MATEMATICAS: MATEMATICAS "},{value:40,label:"INGENIERIA AGRICOLA"},{value:41,label:"MEDICINA HUMANA"},{value:42,label:"INGENIERIA MECANICA ELECTRICA"},{value:43,label:"INGENIERIA ELECTRONICA"},{value:44,label:"INGENIERIA DE SISTEMAS"},{value:45,label:"PSICOLOGIA"}]),L=n([]),H=n([]),ie=n(null),q=n([]),k=n([]),h=n(null),i=n({id:null,nombre:"",id_docente:"",grupo:"A",estado:!0}),j=async()=>{let l=await axios.post("/coordinador/get-docentes?page="+Y.value,{term:O.value});te.value=l.data.datos.data,ae.value=l.data.datos.total},ne=async()=>{let l=await axios.post("/get-programas?page="+Y.value,{term:""});le.value=l.data.datos.data},Q=async()=>{let l=await axios.post("/get-escuelas",{term:V.value});q.value=l.data.datos.data},de=async()=>{let l=await axios.post("/coordinador/get-competencias?page=",{term:""});U.value=l.data.datos},ue=async()=>{let l=await axios.post("/get-docente-competencia?page=",{term:"",competencia:h.value});H.value=l.data.datos.data,ie.value=l.data.datos.data[0].id},w=async()=>{let l=await axios.post("get-cursos?page=",{term:N.value,competencia:S.value,escuela:r.value.escuela});D.value=l.data.datos.data},Z=n(!1),re=async l=>{J(),W.value=l,y.value=!0,Z.value=!0,i.value.id=l.id,i.value.nombre=l.nombre,i.value.grupo=l.grupo,i.value.id_docente=l.id_docente,i.value.id_programa=l.id_programa,A.value=l.id_programa,h.value=l.id_competencia,i.value.id=l.id,l.estado===1?i.value.estado=!0:i.value.estado=!1},ce=async()=>{let l=await axios.post("save-curso",{id:i.value.id,nombre:i.value.nombre,id_competencia:h.value,id_docente:i.value.id_docente,escuela:r.value.escuela,grupo:i.value.grupo,estado:i.value.estado,id_programa:A.value});P(l.data.tipo,l.data.titulo,l.data.mensaje),w(),y.value=!1,J()},K=async()=>{let l=await axios.post("get-detalle-curso?page=",{term:"",curso:c.value.id});k.value=l.data.datos.data,_.value=l.data.registrados.data,g.value=l.data.registrados.data},z=n(null),B=n(null),ve=async()=>{pe(),me();let l=await axios.post("asignar-curso-nivelacion",{curso:c.value.id,alumnos:_.value,anteriores:g.value,diferencia:z.value,diferencia2:B.value});P(l.data.tipo,l.data.titulo,l.data.mensaje),K(),x.value=!1},pe=()=>{z.value=_.value.filter(l=>!g.value.some(s=>s.id===l.id)),console.log("Elementos en array1 que no están en array2:",z.value)},me=()=>{B.value=g.value.filter(l=>!_.value.some(s=>s.id===l.id)),console.log("Elementos en array1 que no están en array2:",B.value)},fe=async l=>{let s=await axios.get("delete-curso/"+l);P(s.data.tipo,s.data.titulo,s.data.mensaje),w()},Ie=async()=>{let l=await axios.post("/get-alumnos-registro?page=",{term:"",escuela:r.value.id,curso:c.value.id_competencia});L.value=l.data.datos};m(y,(l,s)=>{Z.value==!0&&y.value==!1&&(i.value.id=null,i.value.nombre=null,i.value.grupo="A",i.value.estado=!0,A.value=null,i.id_docente=null,h.value=null)});const ye=n(10);m(()=>r.escuela,(l,s)=>{r.escuela!=null&&(c.value=null,D.value=null,k.value=null,_.value=null,g.value=null)}),m(V,(l,s)=>{Q()}),m(N,(l,s)=>{w()}),m(O,(l,s)=>{j()}),m(h,(l,s)=>{ue()}),m(S,(l,s)=>{w()}),m(r,(l,s)=>{r.value!=null&&w()}),m(ye,(l,s)=>{getDocumentos()}),m(c,(l,s)=>{c.value!=null&&(i.value=c.value,K(),Ie())});const he=()=>{x.value=!0},J=()=>{h.value=null,i.value.id=null,i.value.nombre="",i.value.id_docente="",i.value.grupo="A",i.value.estado=!0,A.value=null},P=(l,s,o)=>{$.add({severity:l,summary:s,detail:o,life:3e3})},be=(l,s)=>{ee.require({target:l.currentTarget,message:"¿Estas seguro de eliminar el docente "+s.nombre+"?",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{fe(s.id)},reject:()=>{$.add({severity:"error",summary:"Elimación cancelada",detail:"Se ha cancelado la eliminación del docente "+s.nombres,life:3e3})}})},_e=()=>{r.value=null,c.value=null},Ae=()=>{c.value=null},ge=async l=>{window.open("/coordinador/generar-pdf/"+l,"_self")};return m(c,(l,s)=>{j()}),j(),ne(),de(),Q(),(l,s)=>(p(),v(xe,null,[a(t(Ne),{title:"Nivelación"}),a(we,null,{default:u(()=>[e("div",Te,[e("div",Ge,[a(t(I),{severity:"secondary",style:{"font-size":"0.9rem"},text:"",onClick:_e},{default:u(()=>[C(" Inicio ")]),_:1}),r.value!==null?(p(),v("div",Me,[De,a(t(I),{severity:"secondary",onClick:Ae,style:{"font-size":"0.9rem"},text:""},{default:u(()=>[e("div",Ue,[e("span",null,b(r.value.escuela),1)])]),_:1})])):f("",!0),c.value!==null?(p(),v("div",Le,[ke,a(t(I),{severity:"secondary",style:{"font-size":"0.9rem"},text:""},{default:u(()=>[e("div",je,[e("span",null,b(c.value.nombre),1)])]),_:1})])):f("",!0)]),r.value===null?(p(),v("div",ze,[e("div",Be,[e("span",Pe,[Fe,a(t(T),{modelValue:V.value,"onUpdate:modelValue":s[0]||(s[0]=o=>V.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])):f("",!0),r.value!==null&&c.value===null?(p(),v("div",$e,[a(t(E),{modelValue:S.value,"onUpdate:modelValue":s[1]||(s[1]=o=>S.value=o),options:U.value,severity:"primary",optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"325px",height:"38px"},class:"w-full md:w-11rem mr-4"},{option:u(o=>[e("div",Ye,[e("div",null,b(o.option.label),1)])]),_:1},8,["modelValue","options"])])):f("",!0)]),e("div",He,[e("div",null,[r.value===null?(p(),v("div",qe,[a(t(G),{selection:r.value,"onUpdate:selection":s[2]||(s[2]=o=>r.value=o),selectionMode:"single",value:q.value,class:R("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:10,filters:l.filters},{default:u(()=>[a(t(d),{field:"escuela",header:"Escuela"}),a(t(d),{field:"facultad",header:"Facultad"}),a(t(d),{field:"area",header:"Area"})]),_:1},8,["selection","value","filters"])])):f("",!0)]),r.value!==null&&c.value===null?(p(),v("div",Qe,[e("div",Ze,[a(t(I),{severity:"primary",onClick:s[3]||(s[3]=o=>y.value=!0),style:{height:"40px"}},{default:u(()=>[C(" Nuevo Curso ")]),_:1}),e("div",null,[e("div",Ke,[e("span",Je,[Xe,a(t(T),{modelValue:N.value,"onUpdate:modelValue":s[4]||(s[4]=o=>N.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])]),e("div",We,[a(t(Re),{severity:"warn",sticky:""},{default:u(()=>[C("Debe crearse un solo curso por competencia. En caso de múltiples docentes, uno asume la responsabilidad de ingresar notas tras coordinar con los demás, calcular el promedio de las notas finales del curso. Este docente de preferencia de la escuela profesional o, si no, el docente de servicio. ")]),_:1})]),e("div",el,[a(t(G),{selection:c.value,"onUpdate:selection":s[5]||(s[5]=o=>c.value=o),selectionMode:"single",value:D.value,class:R("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:u(()=>[a(t(d),{field:"nombre",header:"Nombre del Curso"}),a(t(d),{field:"competencia",header:"(Competencia) Curso"}),a(t(d),{field:"docente",header:"Docente"},{body:u(({data:o})=>[e("div",ll,[e("div",null,b(o.docente),1)])]),_:1}),a(t(d),{field:"grupo",header:"Grupo"}),a(t(d),{field:"programa",header:"Programa"}),a(t(d),{field:"escuela",header:"Escuela Prof."}),a(t(d),{field:"estado",header:"Lista",style:{"text-align":"center"}},{body:u(({data:o})=>[e("div",al,[o.estado===1?(p(),v("div",tl,[a(t(I),{class:"secondary",severity:"success",icon:"pi pi-print","aria-label":"Submit",onClick:F=>ge(o.id),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])):f("",!0)])]),_:1}),a(t(d),{field:"estado",header:"Estado",style:{"text-align":"center"}},{body:u(({data:o})=>[e("div",sl,[o.estado===1?(p(),v("div",ol,[a(t(M),{severity:"info",value:"Activo"})])):(p(),v("div",il,[a(t(M),{style:{background:"#CDCDCD"},value:"Inactivo"})]))])]),_:1}),a(t(d),{field:"id_programa",header:"Acciones",width:"90px"},{body:u(({data:o})=>[e("div",nl,[e("div",dl,[a(t(I),{class:"secondary",icon:"pi pi-pencil","aria-label":"Submit",onClick:F=>re(o),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])]),a(t(I),{icon:"pi pi-trash",severity:"danger","aria-label":"Submit",onClick:F=>be(F,o),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value"])])])):f("",!0),r.value!==null&&c.value!==null?(p(),v("div",ul,[e("div",rl,[a(t(I),{severity:"primary",onClick:s[6]||(s[6]=o=>he()),style:{height:"40px"}},{default:u(()=>[C("Seleccionar Alumnos")]),_:1}),e("div",null,[e("div",cl,[e("span",vl,[pl,a(t(T),{modelValue:O.value,"onUpdate:modelValue":s[7]||(s[7]=o=>O.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])]),e("div",ml,[a(t(G),{selectionMode:"single",value:k.value,class:R("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:u(()=>[a(t(d),{field:"dni",header:"DNI"}),a(t(d),{field:"semestre",header:"Ingreso"}),a(t(d),{field:"nombres",header:"Nombres"}),a(t(d),{field:"paterno",header:"Paterno"}),a(t(d),{field:"materno",header:"Materno"}),a(t(d),{field:"curso",header:"Curso"}),a(t(d),{field:"nota",header:"Nota"}),a(t(d),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Condición",width:"70px"},{body:u(({data:o})=>[e("div",fl,[o.nota>=10.5?(p(),v("div",Il,[a(t(M),{severity:"info",value:"Aprobado"})])):f("",!0),o.nota<=10.49?(p(),v("div",yl,[a(t(M),{severity:"danger",value:"Desprobado"})])):f("",!0)])]),_:1})]),_:1},8,["value"])])])):f("",!0),a(t(Oe)),a(t(Ve)),a(t(X),{visible:y.value,"onUpdate:visible":s[15]||(s[15]=o=>y.value=o),modal:"",header:i.value.id?"Editar Curso":"Curso nuevo",style:{width:"750px"}},{footer:u(()=>[e("div",jl,[e("div",null,[a(t(I),{label:"Cancelar",outlined:"",onClick:s[14]||(s[14]=o=>y.value=!1),size:"small"})]),a(t(I),{label:"Guardar",onClick:ce,size:"small"})])]),default:u(()=>[e("div",hl,[bl,e("div",_l,[a(t(Se),{modelValue:i.value.estado,"onUpdate:modelValue":s[8]||(s[8]=o=>i.value.estado=o)},null,8,["modelValue"])])]),e("div",Al,[e("div",gl,[wl,a(t(T),{style:{width:"100%",height:"40px"},type:"text",modelValue:i.value.nombre,"onUpdate:modelValue":s[9]||(s[9]=o=>i.value.nombre=o)},null,8,["modelValue"])]),e("div",Cl,[El,a(t(E),{modelValue:i.value.grupo,"onUpdate:modelValue":s[10]||(s[10]=o=>i.value.grupo=o),options:se.value,optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(o=>[e("div",xl,[e("div",null,b(o.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",Nl,[e("div",Ol,[Vl,a(t(E),{modelValue:h.value,"onUpdate:modelValue":s[11]||(s[11]=o=>h.value=o),options:U.value,optionLabel:"label",optionValue:"value",placeholder:"Seleccione una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(o=>[e("div",Sl,[e("div",null,b(o.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",Rl,[e("div",Tl,[Gl,a(t(E),{modelValue:A.value,"onUpdate:modelValue":s[12]||(s[12]=o=>A.value=o),options:oe.value,filter:"",optionLabel:"label",optionValue:"value",placeholder:"Seleccione un programa de estudio",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(o=>[e("div",Ml,[e("div",null,b(o.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",Dl,[e("div",Ul,[Ll,a(t(E),{modelValue:i.value.id_docente,"onUpdate:modelValue":s[13]||(s[13]=o=>i.value.id_docente=o),options:H.value,filter:"",optionLabel:"nombres",optionValue:"id",placeholder:"Selecciona un docente",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(o=>[e("div",kl,[e("div",null,b(o.option.nombres),1)])]),_:1},8,["modelValue","options"])])])]),_:1},8,["visible","header"]),a(t(X),{visible:x.value,"onUpdate:visible":s[17]||(s[17]=o=>x.value=o),modal:"",header:"Asignar Alumnos",style:{width:"900px"}},{default:u(()=>[L.value?(p(),v("div",zl,[a(t(G),{selection:_.value,"onUpdate:selection":s[16]||(s[16]=o=>_.value=o),selectionMode:"multiple",dataKey:"id",metaKeySelection:!1,"row-selection":!1,value:L.value,class:R("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:10},{default:u(()=>[a(t(d),{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(t(d),{field:"programa",header:"Programa"}),a(t(d),{field:"dni",header:"DNI"}),a(t(d),{field:"semestre",header:"Ingreso"}),a(t(d),{field:"nombres",header:"Nombres"}),a(t(d),{field:"paterno",header:"Paterno"}),a(t(d),{field:"materno",header:"Materno"})]),_:1},8,["selection","value"])])):f("",!0),e("div",Bl,[a(t(I),{severity:"primary",style:{"font-size":"0.9rem"},text:"",onClick:ve},{default:u(()=>[C(" Asignar ")]),_:1})])]),_:1},8,["visible"])])]),_:1})],64))}};export{Jl as default};
