import{A as be}from"./AuthenticatedLayout-576c1162.js";import{r as i,u as Ae,g as _e,h as y,c as v,a,b as t,w as d,F as we,o as p,Z as Ce,d as e,i as S,t as h,f as m,n as V}from"./app-ee7bd71e.js";import{a as f,b as R,s as ge,c as J}from"./NavigationMobile-8795da8d.js";import{b as w,s as T,a as u}from"./column.esm-a0cce4d5.js";import{s as Ee,a as xe}from"./confirmpopup.esm-9dce1244.js";import{s as G}from"./tag.esm-6cadd033.js";import"./_plugin-vue_export-helper-c27b6911.js";const Ne={class:"flex mb-0",style:{"justify-content":"space-between","align-items":"center","margin-top":"0px","border-bottom":"solid 1px #cdcdcd9D",height:"50px",background:"white"}},Oe={class:"flex"},Se={key:0,class:"flex justify-content-center",style:{"align-items":"center"}},Ve=e("i",{class:"pi pi-angle-right"},null,-1),Re={style:{"max-width":"180px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Te={key:1,class:"flex justify-content-center",style:{"align-items":"center"}},Ge=e("i",{class:"pi pi-angle-right"},null,-1),Me={style:{"max-width":"180px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Ue={key:0},De={class:"flex mr-4",style:{"justify-content":"flex-end"}},Le={class:"p-input-icon-left"},ke=e("i",{class:"pi pi-search"},null,-1),je={key:1},Be={class:"flex align-items-center",style:{width:"280px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},ze={class:"bg-white shadow-xs p-4",style:{height:"calc(100vh - 140px)","font-family":"Arial, Helvetica, sans-serif"}},Fe={key:0,class:"card"},Pe={key:0},$e={class:"flex",style:{"justify-content":"space-between"}},Ye={class:"flex mb-3",style:{"justify-content":"flex-end"}},He={class:"p-input-icon-left"},qe=e("i",{class:"pi pi-search"},null,-1),Qe={class:"mt-3"},Ze={class:"flex",style:{"justify-content":"flex-start"}},Ke={class:"flex",style:{"justify-content":"center"}},Je={key:0},Xe={key:1},We={class:"flex"},el={class:"mr-2"},ll={key:1},al={class:"flex",style:{"justify-content":"space-between"}},tl={class:"flex mb-3",style:{"justify-content":"flex-end"}},sl={class:"p-input-icon-left"},ol=e("i",{class:"pi pi-search"},null,-1),il={class:"mt-3"},nl={class:"flex",style:{"justify-content":"center"}},dl={key:0},ul={key:1},rl={class:"flex mt-0 mb-3 align-items-center",style:{"justify-content":"flex-end"}},cl=e("label",null,"Estado",-1),vl={class:"ml-3"},pl={class:"flex",style:{width:"100%","justify-content":"space-between"}},ml={class:"mb-3",style:{width:"68%"}},fl=e("div",null,[e("label",null,"Nombre")],-1),Il={class:"mb-3",style:{width:"28%"}},yl=e("div",null,[e("label",null,"Grupo")],-1),hl={class:"flex align-items-center",style:{"font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},bl={class:"flex",style:{width:"100%","justify-content":"space-between"}},Al={class:"mb-3",style:{width:"100%"}},_l=e("div",null,[e("label",null,"Competencia")],-1),wl={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Cl={class:"flex",style:{width:"100%","justify-content":"space-between"}},gl={class:"mb-3",style:{width:"100%"}},El=e("div",null,[e("label",null,"Programa de estudio")],-1),xl={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Nl={class:"flex",style:{width:"100%","justify-content":"space-between"}},Ol={class:"mb-3",style:{width:"100%"}},Sl=e("div",null,[e("label",null,"Docente")],-1),Vl={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Rl={class:"flex",style:{"justify-content":"flex-end"}},Tl={key:0},Gl={class:"flex",style:{width:"100%","justify-content":"flex-end"}},Fl={__name:"index",setup(Ml){const r=i(null),B=Ae(),X=_e(),C=i(null),b=i([]),z=i([]),c=i(null),g=i(""),M=i([]),W=i([]),ee=i(0),F=i(1),E=i(""),x=i(""),N=i([]),O=i(null),le=i([]),I=i(!1);i(""),i("A");const ae=i([{value:"A",label:"Grupo A"},{value:"B",label:"Grupo B"},{value:"C",label:"Grupo C"},{value:"D",label:"Grupo D"},{value:"E",label:"Grupo E"}]),U=i(null),te=i([{value:1,label:"INGENIERIA AGRONOMICA"},{value:2,label:"INGENIERIA AGROINDUSTRIAL"},{value:3,label:"INGENIERIA TOPOGRAFICA Y AGRIMENSURA"},{value:4,label:"MEDICINA VETERINARIA Y ZOOTECNIA"},{value:5,label:"INGENIERIA ECONOMICA"},{value:6,label:"CIENCIAS CONTABLES"},{value:7,label:"ADMINISTRACION"},{value:8,label:"TRABAJO SOCIAL"},{value:9,label:"ENFERMERIA"},{value:10,label:"INGENIERIA DE MINAS"},{value:11,label:"HUMANIDADES"},{value:12,label:"SOCIOLOGIA"},{value:13,label:"TURISMO"},{value:14,label:"ANTROPOLOGIA"},{value:15,label:"CIENCIAS DE LA COMUNICACION SOCIAL"},{value:16,label:"ARTE: ARTES PLASTICAS"},{value:17,label:"ARTE: MUSICA"},{value:18,label:"ARTE: DANZA"},{value:19,label:"BIOLOGIA: ECOLOGIA"},{value:20,label:"BIOLOGIA: MICROBIOLOGIA Y LABORATORIO CLINICO"},{value:21,label:"BIOLOGIA: PESQUERIA"},{value:22,label:"EDUC. SEC.: CIENCIA, TECNOLOGIA Y AMBIENTE"},{value:23,label:"EDUC. SEC.: CIENCIAS SOCIALES"},{value:24,label:"EDUC. SEC.: LIT. PSICOLOGIA Y FILOSOFIA"},{value:25,label:"EDUC. SEC.: MATEMATICA, FISICA, COMP. E INFORMATICA"},{value:26,label:"EDUCACION PRIMARIA"},{value:27,label:"EDUCACION INICIAL"},{value:28,label:"EDUCACION FISICA"},{value:29,label:"INGENIERIA ESTADISTICA E INFORMATICA"},{value:30,label:"DERECHO"},{value:31,label:"INGENIERIA QUIMICA"},{value:32,label:"ODONTOLOGIA"},{value:33,label:"NUTRICION HUMANA"},{value:34,label:"INGENIERIA GEOLOGICA"},{value:35,label:"INGENIERIA METALURGICA"},{value:36,label:"INGENIERIA CIVIL"},{value:37,label:"ARQUITECTURA Y URBANISMO"},{value:38,label:"CIENCIAS FISICO MATEMATICAS: FISICA"},{value:39,label:"CIENCIAS FISICO MATEMATICAS: MATEMATICAS "},{value:40,label:"INGENIERIA AGRICOLA"},{value:41,label:"MEDICINA HUMANA"},{value:42,label:"INGENIERIA MECANICA ELECTRICA"},{value:43,label:"INGENIERIA ELECTRONICA"},{value:44,label:"INGENIERIA DE SISTEMAS"}]),D=i([]),P=i([]),se=i(null),$=i([]),Y=i([]),A=i(null),n=i({id:null,nombre:"",id_docente:"",grupo:"A",estado:!0}),H=async()=>{let s=await axios.post("/coordinador/get-docentes?page="+F.value,{term:E.value});le.value=s.data.datos.data,ee.value=s.data.datos.total},oe=async()=>{let s=await axios.post("/get-programas?page="+F.value,{term:""});W.value=s.data.datos.data},q=async()=>{let s=await axios.post("/get-escuelas",{term:x.value});$.value=s.data.datos.data},ie=async()=>{let s=await axios.post("/coordinador/get-competencias?page=",{term:""});M.value=s.data.datos},ne=async()=>{let s=await axios.post("/get-docente-competencia?page=",{term:"",competencia:A.value});P.value=s.data.datos.data,se.value=s.data.datos.data[0].id},_=async()=>{let s=await axios.post("get-cursos?page=",{term:g.value,competencia:O.value,escuela:r.value.escuela});z.value=s.data.datos.data},Q=i(!1),de=async s=>{I.value=!0,Q.value=!0,n.value.id=s.id,n.value.nombre=s.nombre,n.value.grupo=s.grupo,n.value.id_docente=s.id_docente,A.value=s.id_competencia,n.value.id=s.id,s.estado===1?n.value.estado=!0:n.value.estado=!1},ue=async()=>{let s=await axios.post("save-curso",{id:n.value.id,nombre:n.value.nombre,id_competencia:A.value,id_docente:n.value.id_docente,escuela:r.value.escuela,grupo:n.value.grupo,estado:n.value.estado,id_programa:U.value});j(s.data.tipo,s.data.titulo,s.data.mensaje),_(),I.value=!1,limpiar()},Z=async()=>{let s=await axios.post("get-detalle-curso?page=",{term:"",curso:c.value.id});Y.value=s.data.datos.data,b.value=s.data.registrados.data,N.value=s.data.registrados.data},L=i(null),k=i(null),re=async()=>{ce(),ve();let s=await axios.post("asignar-curso-nivelacion",{curso:c.value.id,alumnos:b.value,anteriores:N.value,diferencia:L.value,diferencia2:k.value});j(s.data.tipo,s.data.titulo,s.data.mensaje),Z(),C.value=!1},ce=()=>{L.value=b.value.filter(s=>!N.value.some(l=>l.id===s.id)),console.log("Elementos en array1 que no están en array2:",L.value)},ve=()=>{k.value=N.value.filter(s=>!b.value.some(l=>l.id===s.id)),console.log("Elementos en array1 que no están en array2:",k.value)},pe=async s=>{let l=await axios.get("delete-curso/"+s);j(l.data.tipo,l.data.titulo,l.data.mensaje),_()},me=async()=>{let s=await axios.post("/get-alumnos-registro?page=",{term:"",escuela:r.value.id,curso:c.value.id_competencia});D.value=s.data.datos};y(I,(s,l)=>{Q.value==!0&&I.value==!1&&(I.value=!1,n.value.id=null,n.value.nombre=null,n.value.grupo=null,n.value.estado=!0)}),y(x,(s,l)=>{q()}),y(g,(s,l)=>{_()}),y(E,(s,l)=>{H()}),y(A,(s,l)=>{ne()}),y(O,(s,l)=>{_()}),y(r,(s,l)=>{_()}),y(c,(s,l)=>{n.value=c.value,Z(),me()});const fe=()=>{C.value=!0},j=(s,l,o)=>{B.add({severity:s,summary:l,detail:o,life:3e3})},Ie=(s,l)=>{X.require({target:s.currentTarget,message:"¿Estas seguro de eliminar el docente "+l.nombre+"?",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{pe(l.id)},reject:()=>{B.add({severity:"error",summary:"Elimación cancelada",detail:"Se ha cancelado la eliminación del docente "+l.nombres,life:3e3})}})},ye=()=>{r.value=null,c.value=null},he=()=>{c.value=null};return H(),oe(),ie(),q(),(s,l)=>(p(),v(we,null,[a(t(Ce),{title:"Nivelación"}),a(be,null,{default:d(()=>[e("div",Ne,[e("div",Oe,[a(t(f),{severity:"secondary",style:{"font-size":"0.9rem"},text:"",onClick:ye},{default:d(()=>[S(" Inicio ")]),_:1}),r.value!==null?(p(),v("div",Se,[Ve,a(t(f),{severity:"secondary",onClick:he,style:{"font-size":"0.9rem"},text:""},{default:d(()=>[e("div",Re,[e("span",null,h(r.value.escuela),1)])]),_:1})])):m("",!0),c.value!==null?(p(),v("div",Te,[Ge,a(t(f),{severity:"secondary",style:{"font-size":"0.9rem"},text:""},{default:d(()=>[e("div",Me,[e("span",null,h(c.value.nombre),1)])]),_:1})])):m("",!0)]),r.value===null?(p(),v("div",Ue,[e("div",De,[e("span",Le,[ke,a(t(R),{modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=o=>x.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])):m("",!0),r.value!==null&&c.value===null?(p(),v("div",je,[a(t(w),{modelValue:O.value,"onUpdate:modelValue":l[1]||(l[1]=o=>O.value=o),options:M.value,severity:"primary",optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"325px",height:"38px"},class:"w-full md:w-11rem mr-4"},{option:d(o=>[e("div",Be,[e("div",null,h(o.option.label),1)])]),_:1},8,["modelValue","options"])])):m("",!0)]),e("div",ze,[e("div",null,[r.value===null?(p(),v("div",Fe,[a(t(T),{selection:r.value,"onUpdate:selection":l[2]||(l[2]=o=>r.value=o),selectionMode:"single",value:$.value,class:V("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:10,filters:s.filters},{default:d(()=>[a(t(u),{field:"escuela",header:"Escuela"}),a(t(u),{field:"facultad",header:"Facultad"}),a(t(u),{field:"area",header:"Area"})]),_:1},8,["selection","value","filters"])])):m("",!0)]),r.value!==null&&c.value===null?(p(),v("div",Pe,[e("div",$e,[a(t(f),{severity:"primary",onClick:l[3]||(l[3]=o=>I.value=!0),style:{height:"40px"}},{default:d(()=>[S(" Nuevo Curso ")]),_:1}),e("div",null,[e("div",Ye,[e("span",He,[qe,a(t(R),{modelValue:g.value,"onUpdate:modelValue":l[4]||(l[4]=o=>g.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])]),e("div",Qe,[a(t(T),{selection:c.value,"onUpdate:selection":l[5]||(l[5]=o=>c.value=o),selectionMode:"single",value:z.value,class:V("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:d(()=>[a(t(u),{field:"nombre",header:"Nombre"}),a(t(u),{field:"competencia",header:"Curso"}),a(t(u),{field:"docente",header:"Docente"},{body:d(({data:o})=>[e("div",Ze,[e("div",null,h(o.docente),1)])]),_:1}),a(t(u),{field:"grupo",header:"Grupo"}),a(t(u),{field:"escuela",header:"Escuela Prof."}),a(t(u),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Estado",width:"70px"},{body:d(({data:o})=>[e("div",Ke,[o.estado===1?(p(),v("div",Je,[a(t(G),{severity:"info",value:"Activo"})])):m("",!0),o.estado===0?(p(),v("div",Xe,[a(t(G),{style:{background:"#CDCDCD"},value:"Inactivo"})])):m("",!0)])]),_:1}),a(t(u),{field:"id_programa",header:"Acciones",width:"90px"},{body:d(({data:o})=>[e("div",We,[e("div",el,[a(t(f),{class:"secondary",icon:"pi pi-pencil","aria-label":"Submit",onClick:K=>de(o),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])]),a(t(f),{icon:"pi pi-trash",severity:"danger","aria-label":"Submit",onClick:K=>Ie(K,o),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value"])])])):m("",!0),r.value!==null&&c.value!==null?(p(),v("div",ll,[e("div",al,[a(t(f),{severity:"primary",onClick:l[6]||(l[6]=o=>fe()),style:{height:"40px"}},{default:d(()=>[S(" Seleccionar ")]),_:1}),e("div",null,[e("div",tl,[e("span",sl,[ol,a(t(R),{modelValue:E.value,"onUpdate:modelValue":l[7]||(l[7]=o=>E.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])]),e("div",il,[a(t(T),{selectionMode:"single",value:Y.value,class:V("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:d(()=>[a(t(u),{field:"dni",header:"DNI"}),a(t(u),{field:"nombres",header:"Nombres"}),a(t(u),{field:"paterno",header:"Paterno"}),a(t(u),{field:"materno",header:"Materno"}),a(t(u),{field:"curso",header:"Curso"}),a(t(u),{field:"nota",header:"Nota"}),a(t(u),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Condición",width:"70px"},{body:d(({data:o})=>[e("div",nl,[o.nota>=10.5?(p(),v("div",dl,[a(t(G),{severity:"info",value:"Aprobado"})])):m("",!0),o.nota<=10.49?(p(),v("div",ul,[a(t(G),{severity:"danger",value:"Desprobado"})])):m("",!0)])]),_:1})]),_:1},8,["value"])])])):m("",!0),a(t(ge)),a(t(Ee)),a(t(J),{visible:I.value,"onUpdate:visible":l[15]||(l[15]=o=>I.value=o),modal:"",header:n.value.id?"Editar Curso":"Curso nuevo",style:{width:"500px"}},{footer:d(()=>[e("div",Rl,[e("div",null,[a(t(f),{label:"Cancelar",outlined:"",onClick:l[14]||(l[14]=o=>I.value=!1),size:"small"})]),a(t(f),{label:"Guardar",onClick:ue,size:"small"})])]),default:d(()=>[e("div",rl,[cl,e("div",vl,[a(t(xe),{modelValue:n.value.estado,"onUpdate:modelValue":l[8]||(l[8]=o=>n.value.estado=o)},null,8,["modelValue"])])]),e("div",pl,[e("div",ml,[fl,a(t(R),{style:{width:"100%",height:"40px"},type:"text",modelValue:n.value.nombre,"onUpdate:modelValue":l[9]||(l[9]=o=>n.value.nombre=o)},null,8,["modelValue"])]),e("div",Il,[yl,a(t(w),{modelValue:n.value.grupo,"onUpdate:modelValue":l[10]||(l[10]=o=>n.value.grupo=o),options:ae.value,optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:d(o=>[e("div",hl,[e("div",null,h(o.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",bl,[e("div",Al,[_l,a(t(w),{modelValue:A.value,"onUpdate:modelValue":l[11]||(l[11]=o=>A.value=o),options:M.value,optionLabel:"label",optionValue:"value",placeholder:"Seleccione una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:d(o=>[e("div",wl,[e("div",null,h(o.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",Cl,[e("div",gl,[El,a(t(w),{modelValue:U.value,"onUpdate:modelValue":l[12]||(l[12]=o=>U.value=o),options:te.value,filter:"",optionLabel:"label",optionValue:"value",placeholder:"Seleccione un programa de estudio",style:{width:"100%"},class:"w-full md:w-11rem"},{option:d(o=>[e("div",xl,[e("div",null,h(o.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",Nl,[e("div",Ol,[Sl,a(t(w),{modelValue:n.value.id_docente,"onUpdate:modelValue":l[13]||(l[13]=o=>n.value.id_docente=o),options:P.value,filter:"",optionLabel:"nombres",optionValue:"id",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:d(o=>[e("div",Vl,[e("div",null,h(o.option.nombres),1)])]),_:1},8,["modelValue","options"])])])]),_:1},8,["visible","header"]),a(t(J),{visible:C.value,"onUpdate:visible":l[17]||(l[17]=o=>C.value=o),modal:"",header:"Asignar Alumnos",style:{width:"900px"}},{default:d(()=>[D.value?(p(),v("div",Tl,[a(t(T),{selection:b.value,"onUpdate:selection":l[16]||(l[16]=o=>b.value=o),selectionMode:"multiple",dataKey:"id",metaKeySelection:!1,"row-selection":!1,value:D.value,class:V("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:d(()=>[a(t(u),{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(t(u),{field:"programa",header:"Programa"}),a(t(u),{field:"dni",header:"DNI"}),a(t(u),{field:"nombres",header:"Nombres"}),a(t(u),{field:"paterno",header:"Paterno"}),a(t(u),{field:"materno",header:"Materno"})]),_:1},8,["selection","value"])])):m("",!0),e("div",Gl,[a(t(f),{severity:"primary",style:{"font-size":"0.9rem"},text:"",onClick:re},{default:d(()=>[S(" Asignar ")]),_:1})])]),_:1},8,["visible"])])]),_:1})],64))}};export{Fl as default};
