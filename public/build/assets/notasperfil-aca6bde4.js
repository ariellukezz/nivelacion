import{r as a,i as S,w as O,d as $,o as d,e,x as f,a7 as D,c as r,l as b,F as y,a8 as L,a as A,b as I,t as l}from"./app-9957fcc0.js";import{A as N}from"./LayoutSuperadmi-584a8f9c.js";import{X as p}from"./xlsx-4fdd4c8a.js";import{s as P}from"./index.esm-b6b36824.js";import"./TopMenu-5fc87428.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-c81f6204.js";const V={class:"p-4",style:{background:"white"}},j={class:"flex justify-between mb-2"},q=e("label",{for:"programa"},"Programa de Estudio: ",-1),z=e("option",{value:""},"Todos",-1),F=["value"],M=e("label",{for:"busqueda"},"Buscar por Nombre o DNIcodii: ",-1),R={style:{"border-radius":"4px",width:"100%",overflow:"hidden"}},G=e("thead",{style:{height:"30px",color:"white","background-color":"var(--primary-color)",padding:"0px 10px"}},[e("tr",{style:{"font-size":".9rem"}},[e("th",{style:{border:"1px solid #d9d9d9"}},"CODIGO"),e("th",{style:{border:"1px solid #d9d9d9"}},"APELLIDOS Y NOMBRES"),e("th",{style:{border:"1px solid #d9d9d9"}},"PROGRAMA DE ESTUDIO"),e("th",{style:{border:"1px solid #d9d9d9"}},"INGRESO"),e("th",{style:{border:"1px solid #d9d9d9"}},"C1"),e("th",{style:{border:"1px solid #d9d9d9"}},"C2"),e("th",{style:{border:"1px solid #d9d9d9"}},"C3"),e("th",{style:{border:"1px solid #d9d9d9"}},"C4"),e("th",{style:{border:"1px solid #d9d9d9"}},"C5"),e("th",{style:{border:"1px solid #d9d9d9"}},"C6"),e("th",{style:{border:"1px solid #d9d9d9"}},"C7"),e("th",{style:{border:"1px solid #d9d9d9"}},"C8"),e("th",{style:{border:"1px solid #d9d9d9"}},"C9"),e("th",{style:{border:"1px solid #d9d9d9"}},"C10"),e("th",{style:{border:"1px solid #d9d9d9"}},"C11")])],-1),T={style:{border:"1px solid #d9d9d9","font-weight":".8rem","text-align":"center"}},U={class:"pl-1 pr-1"},X={style:{border:"1px solid #d9d9d9","font-weight":".7rem"}},Y={class:"pl-1 pr-1"},H={style:{border:"1px solid #d9d9d9","font-weight":".8rem","text-align":"center"}},J={class:"pl-1 pr-1"},K={style:{border:"1px solid #d9d9d9","font-weight":".8rem","text-align":"center"}},Q={class:"pl-1 pr-1"},W={key:0,style:{"text-align":"center"}},Z={key:0},ee={key:1},te=e("span",{style:{"font-size":".9rem"}},null,-1),oe=[te],se={key:1,style:{"text-align":"center"}},pe={__name:"notasperfil",setup(de){function c(o,s){for(var t=0;t<o.length;t++)if(o[t].competencia===s)return t;return null}const m=a(1),_=a([]),h=a([]),v=a([]),u=a(""),i=a(""),g=a([]),w=async()=>{let o=await $.get("notasperf?page="+m.value,{term:""});_.value=o.data.datos,C(),x()},C=()=>{const o=new Set;_.value.forEach(s=>{o.add(s.programa)}),v.value=Array.from(o)},x=()=>{h.value=_.value.filter(o=>{const s=u.value===""||o.programa===u.value,t=i.value===""||o.codigo_est.includes(i.value)||`${o.paterno} ${o.materno} ${o.nombre}`.toLowerCase().includes(i.value.toLowerCase());return s&&t}),k()},k=()=>{g.value=h.value.map(o=>{const s={codigo_est:o.codigo_est,programa:o.programa,semestre:o.semestre,nombreCompleto:`${o.paterno} ${o.materno},  ${o.nombre}`};for(let t=1;t<=11;t++){const n=c(o.notas,t);n!==null?s[`C${t}`]=o.notas[n].nota:s[`C${t}`]="--"}return s})},E=()=>{const o=p.utils.json_to_sheet(g.value),s=p.utils.book_new();p.utils.book_append_sheet(s,o,"Estudiantes"),p.writeFile(s,"estudiantes.xlsx")};return w(),(o,s)=>(d(),S(N,null,{default:O(()=>[e("div",V,[e("div",j,[e("div",null,[q,f(e("select",{id:"programa","onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),onChange:x},[z,(d(!0),r(y,null,b(v.value,t=>(d(),r("option",{key:t,value:t},l(t),9,F))),128))],544),[[D,u.value]])]),e("div",null,[M,f(e("input",{id:"busqueda","onUpdate:modelValue":s[1]||(s[1]=t=>i.value=t),onInput:x,type:"text",placeholder:"Buscar..."},null,544),[[L,i.value]])]),A(I(P),{label:"Exportar excel",onClick:E,size:"small",style:{height:"40px"}})]),e("table",R,[G,e("tbody",null,[(d(!0),r(y,null,b(h.value,t=>(d(),r("tr",{key:t.id,style:{"font-size":".9rem"}},[e("td",T,[e("div",U,l(t.codigo_est),1)]),e("td",X,[e("div",Y,l(t.paterno)+" "+l(t.materno)+", "+l(t.nombre),1)]),e("td",H,[e("div",J,l(t.programa),1)]),e("td",K,[e("div",Q,l(t.semestre),1)]),(d(),r(y,null,b(11,(n,B)=>e("td",{key:B,style:{border:"1px solid #d9d9d9","min-width":"40px"}},[c(t.notas,n)!==null?(d(),r("div",W,[t.notas[c(t.notas,n)]?(d(),r("div",Z,l(t.notas[c(t.notas,n)].nota),1)):(d(),r("div",ee,oe))])):(d(),r("div",se," - - "))])),64))]))),128))])])])]),_:1}))}};export{pe as default};
