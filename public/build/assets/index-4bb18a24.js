import{A as ce}from"./AuthenticatedLayout-6743deb5.js";import{r as n,u as pe,i as ve,j as y,c as p,a as t,b as l,w as u,F as me,o as v,Z as fe,d as e,k as z,t as _,h as m,n as A}from"./app-83b9cb83.js";import{s as f}from"./NavigationMobile-01627c35.js";import{s as D}from"./focustrap.esm-ce174ef7.js";import{b as N,s as S,a as d}from"./column.esm-b9689e49.js";import{s as Z}from"./dialog.esm-c89f4663.js";import{s as he,a as ye}from"./confirmpopup.esm-4415603d.js";import{s as _e}from"./toast.esm-a111c024.js";import{s as U}from"./tag.esm-77a93ca1.js";import"./_plugin-vue_export-helper-c27b6911.js";const we={class:"flex mb-0",style:{"justify-content":"space-between","align-items":"center","margin-top":"0px","border-bottom":"solid 1px #cdcdcd9D",height:"50px",background:"white"}},ge={class:"flex"},be={key:0,class:"flex justify-content-center",style:{"align-items":"center"}},xe=e("i",{class:"pi pi-angle-right"},null,-1),Ve={style:{"max-width":"180px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Ce={key:1,class:"flex justify-content-center",style:{"align-items":"center"}},ke=e("i",{class:"pi pi-angle-right"},null,-1),je={style:{"max-width":"180px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},ze={key:0},Ae={class:"flex mr-4",style:{"justify-content":"flex-end"}},De={class:"p-input-icon-left"},Ne=e("i",{class:"pi pi-search"},null,-1),Se={key:1},Ue={class:"flex align-items-center",style:{width:"280px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},$e={class:"bg-white shadow-xs p-4",style:{height:"calc(100vh - 140px)","font-family":"Arial, Helvetica, sans-serif"}},Ee={key:0,class:"card"},Be={key:0},Ge={class:"flex",style:{"justify-content":"space-between"}},Me={class:"flex mb-3",style:{"justify-content":"flex-end"}},Ie={class:"p-input-icon-left"},Le=e("i",{class:"pi pi-search"},null,-1),Pe={class:"mt-3"},Te={class:"flex",style:{"justify-content":"flex-start"}},Fe={class:"flex",style:{"justify-content":"center"}},qe={key:0},He={key:1},Re={class:"flex"},Xe={class:"mr-2"},Ze={key:1},Je={class:"flex",style:{"justify-content":"space-between"}},Ke={class:"flex mb-3",style:{"justify-content":"flex-end"}},Oe={class:"p-input-icon-left"},Qe=e("i",{class:"pi pi-search"},null,-1),We={class:"mt-3"},Ye={class:"flex",style:{"justify-content":"center"}},et={key:0},tt={key:1},lt={class:"flex mt-0 mb-3 align-items-center",style:{"justify-content":"flex-end"}},at=e("label",null,"Estado",-1),st={class:"ml-3"},ot={class:"flex",style:{width:"100%","justify-content":"space-between"}},it={class:"mb-3",style:{width:"68%"}},nt=e("div",null,[e("label",null,"Nombre")],-1),dt={class:"mb-3",style:{width:"28%"}},ut=e("div",null,[e("label",null,"Grupo")],-1),rt={class:"flex align-items-center",style:{"font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},ct={class:"flex",style:{width:"100%","justify-content":"space-between"}},pt={class:"mb-3",style:{width:"100%"}},vt=e("div",null,[e("label",null,"Competencia")],-1),mt={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},ft={class:"flex",style:{width:"100%","justify-content":"space-between"}},ht={class:"mb-3",style:{width:"100%"}},yt=e("div",null,[e("label",null,"Docente")],-1),_t={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},wt={class:"flex",style:{"justify-content":"flex-end"}},gt={class:"flex",style:{width:"100%","justify-content":"flex-end"}},Ut={__name:"index",setup(bt){const r=n(null),G=pe(),J=ve(),g=n(null),b=n([]),M=n([]),c=n(null),x=n(""),$=n([]),K=n([]),O=n(0),I=n(1),V=n(""),C=n(""),k=n(null),Q=n([]),h=n(!1);n(""),n("A");const W=n([{value:"A",label:"Grupo A"},{value:"B",label:"Grupo B"},{value:"C",label:"Grupo C"},{value:"D",label:"Grupo D"},{value:"E",label:"Grupo E"}]),L=n([]),P=n([]),Y=n(null),T=n([]),F=n([]),w=n(null),i=n({id:null,nombre:"",id_docente:"",grupo:"A",estado:!0}),E=async()=>{let s=await axios.post("/coordinador/get-docentes?page="+I.value,{term:V.value});Q.value=s.data.datos.data,O.value=s.data.datos.total},ee=async()=>{let s=await axios.post("/get-programas?page="+I.value,{term:""});K.value=s.data.datos.data},q=async()=>{let s=await axios.post("/get-escuelas",{term:C.value});T.value=s.data.datos.data},te=async()=>{let s=await axios.post("/coordinador/get-competencias?page=",{term:""});$.value=s.data.datos},le=async()=>{let s=await axios.post("/get-docente-competencia?page=",{term:"",competencia:w.value});P.value=s.data.datos.data,Y.value=s.data.datos.data[0].id},j=async()=>{let s=await axios.post("get-cursos?page=",{term:x.value,competencia:k.value,escuela:r.value.escuela});M.value=s.data.datos.data},H=n(!1),ae=async s=>{h.value=!0,H.value=!0,i.value.id=s.id,i.value.nombre=s.nombre,i.value.grupo=s.grupo,i.value.id_docente=s.id_docente,w.value=s.id_competencia,i.value.id=s.id,s.estado===1?i.value.estado=!0:i.value.estado=!1},se=async()=>{let s=await axios.post("save-curso",{id:i.value.id,nombre:i.value.nombre,id_competencia:w.value,id_docente:i.value.id_docente,escuela:r.value.escuela,grupo:i.value.grupo,estado:i.value.estado});B(s.data.tipo,s.data.titulo,s.data.mensaje),j(),h.value=!1,limpiar()},R=async()=>{let s=await axios.post("get-detalle-curso?page=",{term:"",curso:c.value.id});F.value=s.data.datos.data,b.value=s.data.registrados.data},oe=async()=>{let s=await axios.post("asignar-curso-nivelacion",{curso:c.value.id,alumnos:b.value});B(s.data.tipo,s.data.titulo,s.data.mensaje),R(),g.value=!1},ie=async s=>{let a=await axios.get("delete-docente/"+s);B(a.data.tipo,a.data.titulo,a.data.mensaje),E()},ne=async()=>{let s=await axios.post("/get-alumnos-registro?page=",{term:"",escuela:r.value.id,curso:c.value.id_competencia});L.value=s.data.datos};y(h,(s,a)=>{H.value==!0&&h.value==!1&&(h.value=!1,i.value.id=null,i.value.nombre=null,i.value.grupo=null,i.value.estado=!0)}),y(C,(s,a)=>{q()}),y(x,(s,a)=>{j()}),y(V,(s,a)=>{E()}),y(w,(s,a)=>{le()}),y(k,(s,a)=>{j()}),y(r,(s,a)=>{j()}),y(c,(s,a)=>{i.value=c.value,R(),ne()});const B=(s,a,o)=>{G.add({severity:s,summary:a,detail:o,life:3e3})},de=(s,a)=>{J.require({target:s.currentTarget,message:"¿Estas seguro de eliminar al docente "+a.nombres+"?",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{ie(a.id)},reject:()=>{G.add({severity:"error",summary:"Elimación cancelada",detail:"Se ha cancelado la eliminación del docente "+a.nombres,life:3e3})}})},ue=()=>{r.value=null,c.value=null},re=()=>{c.value=null};return E(),ee(),te(),q(),(s,a)=>(v(),p(me,null,[t(l(fe),{title:"Nivelación"}),t(ce,null,{default:u(()=>[e("div",we,[e("div",ge,[t(l(f),{severity:"secondary",style:{"font-size":"0.9rem"},text:"",onClick:ue},{default:u(()=>[z(" Inicio ")]),_:1}),r.value!==null?(v(),p("div",be,[xe,t(l(f),{severity:"secondary",onClick:re,style:{"font-size":"0.9rem"},text:""},{default:u(()=>[e("div",Ve,[e("span",null,_(r.value.escuela),1)])]),_:1})])):m("",!0),c.value!==null?(v(),p("div",Ce,[ke,t(l(f),{severity:"secondary",style:{"font-size":"0.9rem"},text:""},{default:u(()=>[e("div",je,[e("span",null,_(c.value.nombre),1)])]),_:1})])):m("",!0)]),r.value===null?(v(),p("div",ze,[e("div",Ae,[e("span",De,[Ne,t(l(D),{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=o=>C.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])):m("",!0),r.value!==null&&c.value===null?(v(),p("div",Se,[t(l(N),{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=o=>k.value=o),options:$.value,severity:"primary",optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"325px",height:"38px"},class:"w-full md:w-11rem mr-4"},{option:u(o=>[e("div",Ue,[e("div",null,_(o.option.label),1)])]),_:1},8,["modelValue","options"])])):m("",!0)]),e("div",$e,[e("div",null,[r.value===null?(v(),p("div",Ee,[t(l(S),{selection:r.value,"onUpdate:selection":a[2]||(a[2]=o=>r.value=o),selectionMode:"single",value:T.value,class:A("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:10,filters:s.filters},{default:u(()=>[t(l(d),{field:"escuela",header:"Escuela"}),t(l(d),{field:"facultad",header:"Facultad"}),t(l(d),{field:"area",header:"Area"})]),_:1},8,["selection","value","filters"])])):m("",!0)]),r.value!==null&&c.value===null?(v(),p("div",Be,[e("div",Ge,[t(l(f),{severity:"primary",onClick:a[3]||(a[3]=o=>h.value=!0),style:{height:"40px"}},{default:u(()=>[z(" Nuevo Curso ")]),_:1}),e("div",null,[e("div",Me,[e("span",Ie,[Le,t(l(D),{modelValue:x.value,"onUpdate:modelValue":a[4]||(a[4]=o=>x.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])]),e("div",Pe,[t(l(S),{selection:c.value,"onUpdate:selection":a[5]||(a[5]=o=>c.value=o),selectionMode:"single",value:M.value,class:A("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:u(()=>[t(l(d),{field:"nombre",header:"Nombre"}),t(l(d),{field:"competencia",header:"Competencia"}),t(l(d),{field:"docente",header:"Docente"},{body:u(({data:o})=>[e("div",Te,[e("div",null,_(o.docente),1)])]),_:1}),t(l(d),{field:"grupo",header:"Grupo"}),t(l(d),{field:"escuela",header:"Escuela Prof."}),t(l(d),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Estado",width:"70px"},{body:u(({data:o})=>[e("div",Fe,[o.estado===1?(v(),p("div",qe,[t(l(U),{severity:"info",value:"Activo"})])):m("",!0),o.estado===0?(v(),p("div",He,[t(l(U),{style:{background:"#CDCDCD"},value:"Inactivo"})])):m("",!0)])]),_:1}),t(l(d),{field:"id_programa",header:"Acciones",width:"90px"},{body:u(({data:o})=>[e("div",Re,[e("div",Xe,[t(l(f),{class:"secondary",icon:"pi pi-pencil","aria-label":"Submit",onClick:X=>ae(o),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])]),t(l(f),{icon:"pi pi-trash",severity:"danger","aria-label":"Submit",onClick:X=>de(X,o),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value"])])])):m("",!0),r.value!==null&&c.value!==null?(v(),p("div",Ze,[e("div",Je,[t(l(f),{severity:"primary",onClick:a[6]||(a[6]=o=>g.value=!0),style:{height:"40px"}},{default:u(()=>[z(" Nuevo ")]),_:1}),e("div",null,[e("div",Ke,[e("span",Oe,[Qe,t(l(D),{modelValue:V.value,"onUpdate:modelValue":a[7]||(a[7]=o=>V.value=o),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])]),e("div",We,[t(l(S),{selectionMode:"single",value:F.value,class:A("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:u(()=>[t(l(d),{field:"dni",header:"DNI"}),t(l(d),{field:"nombres",header:"Nombres"}),t(l(d),{field:"paterno",header:"Paterno"}),t(l(d),{field:"materno",header:"Materno"}),t(l(d),{field:"curso",header:"Curso"}),t(l(d),{field:"nota",header:"Nota"}),t(l(d),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Condición",width:"70px"},{body:u(({data:o})=>[e("div",Ye,[o.nota>=10.5?(v(),p("div",et,[t(l(U),{severity:"info",value:"Aprobado"})])):m("",!0),o.nota<=10.49?(v(),p("div",tt,[t(l(U),{severity:"danger",value:"Desprobado"})])):m("",!0)])]),_:1})]),_:1},8,["value"])])])):m("",!0),t(l(_e)),t(l(he)),t(l(Z),{visible:h.value,"onUpdate:visible":a[14]||(a[14]=o=>h.value=o),modal:"",header:i.value.id?"Editar Curso":"Curso nuevo",style:{width:"500px"}},{footer:u(()=>[e("div",wt,[e("div",null,[t(l(f),{label:"Cancelar",outlined:"",onClick:a[13]||(a[13]=o=>h.value=!1),size:"small"})]),t(l(f),{label:"Guardar",onClick:se,size:"small"})])]),default:u(()=>[e("div",lt,[at,e("div",st,[t(l(ye),{modelValue:i.value.estado,"onUpdate:modelValue":a[8]||(a[8]=o=>i.value.estado=o)},null,8,["modelValue"])])]),e("div",ot,[e("div",it,[nt,t(l(D),{style:{width:"100%",height:"40px"},type:"text",modelValue:i.value.nombre,"onUpdate:modelValue":a[9]||(a[9]=o=>i.value.nombre=o)},null,8,["modelValue"])]),e("div",dt,[ut,t(l(N),{modelValue:i.value.grupo,"onUpdate:modelValue":a[10]||(a[10]=o=>i.value.grupo=o),options:W.value,optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(o=>[e("div",rt,[e("div",null,_(o.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",ct,[e("div",pt,[vt,t(l(N),{modelValue:w.value,"onUpdate:modelValue":a[11]||(a[11]=o=>w.value=o),options:$.value,optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(o=>[e("div",mt,[e("div",null,_(o.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",ft,[e("div",ht,[yt,t(l(N),{modelValue:i.value.id_docente,"onUpdate:modelValue":a[12]||(a[12]=o=>i.value.id_docente=o),options:P.value,filter:"",optionLabel:"nombres",optionValue:"id",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(o=>[e("div",_t,[e("div",null,_(o.option.nombres),1)])]),_:1},8,["modelValue","options"])])])]),_:1},8,["visible","header"]),t(l(Z),{visible:g.value,"onUpdate:visible":a[16]||(a[16]=o=>g.value=o),modal:"",header:"Asignar Alumnossssss",style:{width:"900px"}},{default:u(()=>[t(l(S),{selection:b.value,"onUpdate:selection":a[15]||(a[15]=o=>b.value=o),"row-selection":s.rowSelection,value:L.value,class:A("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:u(()=>[t(l(d),{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(l(d),{field:"programa",header:"Programa"}),t(l(d),{field:"dni",header:"DNI"}),t(l(d),{field:"nombres",header:"Nombres"}),t(l(d),{field:"paterno",header:"Paterno"}),t(l(d),{field:"materno",header:"Materno"})]),_:1},8,["selection","row-selection","value"]),e("div",gt,[t(l(f),{severity:"primary",style:{"font-size":"0.9rem"},text:"",onClick:oe},{default:u(()=>[z(" Asignar ")]),_:1})])]),_:1},8,["visible"])])]),_:1})],64))}};export{Ut as default};
