import{r as c,o as T,j as B,w as i,a as D,e as f,b as r,d,Z as L,f as e,n as S,g as a,t as s,c as x,F as V,m as $,i as q,s as F,p as R,q as A}from"./app-f994730f.js";import{A as M}from"./LayoutSuperadmi-4dc1cd2d.js";import{s as U}from"./datatable.esm-f7182f59.js";import{s as y}from"./column.esm-434bfdc1.js";import{a as j,s as z}from"./index.esm-0e4f3215.js";import{b as O}from"./TopMenu-f2fc4239.js";import{s as Z}from"./breadcrumb.esm-311ccb53.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-eb2fad28.js";import"./dropdown.esm-99078355.js";import"./inputnumber.esm-8769ed9c.js";const o=m=>(R("data-v-88be1192"),m=m(),A(),m),H={class:"p-4"},J=o(()=>e("h2",{class:"text-xl font-semibold mb-4"},"Búsqueda de Estudiantes",-1)),K={class:"mb-6"},Q={class:"p-input-icon-left w-full"},W=o(()=>e("i",{class:"pi pi-search"},null,-1)),X={class:"cursor-pointer text-primary"},Y={class:"cursor-pointer text-primary"},ee=o(()=>e("div",{class:"text-center py-8"},[e("i",{class:"pi pi-info-circle mr-2"}),a(" No se encontraron resultados ")],-1)),se=o(()=>e("div",{class:"text-center py-8"},[e("i",{class:"pi pi-spinner pi-spin mr-2"}),a(" Cargando datos... ")],-1)),te={key:0,class:"p-4"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},le=o(()=>e("h3",{class:"text-lg font-semibold mb-2"},"Información Personal",-1)),ae=o(()=>e("strong",null,"Código:",-1)),ne=o(()=>e("strong",null,"DNI:",-1)),ie=o(()=>e("strong",null,"Nombre:",-1)),re=o(()=>e("strong",null,"Sexo:",-1)),de=o(()=>e("strong",null,"Teléfono:",-1)),ce=o(()=>e("strong",null,"Email:",-1)),ue=o(()=>e("strong",null,"Dirección:",-1)),pe=o(()=>e("h3",{class:"text-lg font-semibold mb-2"},"Información Académica",-1)),me=o(()=>e("strong",null,"Semestre:",-1)),_e=o(()=>e("strong",null,"Modalidad:",-1)),ve=o(()=>e("strong",null,"Tipo Examen:",-1)),ge=o(()=>e("strong",null,"Año:",-1)),fe=o(()=>e("strong",null,"Programa:",-1)),he=o(()=>e("strong",null,"Escuela:",-1)),be=o(()=>e("strong",null,"Filial:",-1)),xe={class:"col-span-2"},ye=o(()=>e("h3",{class:"text-lg font-semibold mb-2"},"Competencias",-1)),we={class:"grid grid-cols-2 gap-2"},ke={__name:"index",setup(m){function w(u,n){let p;return function(...I){const N=()=>{clearTimeout(p),u(...I)};clearTimeout(p),p=setTimeout(N,n)}}const k=c([]),h=c([]),v=c(""),g=c(!1),_=c(!1),l=c(null),C=c([{label:"Inicio",icon:"pi pi-home",url:"/"},{label:"Supervisor",icon:"pi pi-user",url:"/supervisor"},{label:"Búsqueda de Estudiantes",icon:"pi pi-search",url:"/estudiantes"}]),b=async(u="")=>{try{g.value=!0;const n=await D.get("busqueda-estudiantes",{params:{search:u}});n.data.success?(k.value=n.data.data,h.value=n.data.data):console.error("Error en la respuesta:",n.data.message)}catch(n){console.error("Error al obtener estudiantes:",n)}finally{g.value=!1}},E=w(()=>{b(v.value)},300),P=u=>{l.value=u,_.value=!0};return T(()=>b()),(u,n)=>{const p=F("router-link");return f(),B(M,null,{default:i(()=>[r(d(L),{title:"Búsqueda de Estudiantes"}),e("div",H,[r(d(Z),{model:C.value,class:"mb-4"},{item:i(({item:t})=>[r(p,{to:t.url,class:"text-primary hover:text-primary-dark"},{default:i(()=>[e("i",{class:S([t.icon,"mr-2"])},null,2),a(" "+s(t.label),1)]),_:2},1032,["to"])]),_:1},8,["model"]),J,e("div",K,[e("span",Q,[W,r(d(j),{modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=t=>v.value=t),placeholder:"Buscar por código, DNI, nombres o apellidos...",class:"w-full",onInput:d(E)},null,8,["modelValue","onInput"])])]),r(d(U),{value:h.value,loading:g.value,stripedRows:"",paginator:"",rows:10,rowsPerPageOptions:[10,25,50],class:"p-datatable-sm",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} estudiantes",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",onRowClick:n[1]||(n[1]=t=>P(t.data))},{empty:i(()=>[ee]),loading:i(()=>[se]),default:i(()=>[r(d(y),{field:"codigo_est",header:"Código",sortable:""},{body:i(({data:t})=>[e("span",X,s(t.codigo_est),1)]),_:1}),r(d(y),{field:"nombre_completo",header:"Nombre Completo",sortable:""},{body:i(({data:t})=>[e("span",Y,s(t.paterno)+" "+s(t.materno)+", "+s(t.nombres),1)]),_:1})]),_:1},8,["value","loading"]),r(d(O),{visible:_.value,"onUpdate:visible":n[3]||(n[3]=t=>_.value=t),header:"Detalles del Estudiante",modal:!0,style:{width:"50vw"},breakpoints:{"960px":"75vw","640px":"100vw"}},{footer:i(()=>[r(d(z),{label:"Cerrar",icon:"pi pi-times",class:"p-button-text",onClick:n[2]||(n[2]=t=>_.value=!1)})]),default:i(()=>[l.value?(f(),x("div",te,[e("div",oe,[e("div",null,[le,e("p",null,[ae,a(" "+s(l.value.codigo_est),1)]),e("p",null,[ne,a(" "+s(l.value.dni),1)]),e("p",null,[ie,a(" "+s(l.value.nombres)+" "+s(l.value.paterno)+" "+s(l.value.materno),1)]),e("p",null,[re,a(" "+s(l.value.sexo),1)]),e("p",null,[de,a(" "+s(l.value.telefono),1)]),e("p",null,[ce,a(" "+s(l.value.email),1)]),e("p",null,[ue,a(" "+s(l.value.direccion),1)])]),e("div",null,[pe,e("p",null,[me,a(" "+s(l.value.semestre),1)]),e("p",null,[_e,a(" "+s(l.value.modalidad),1)]),e("p",null,[ve,a(" "+s(l.value.t_examen),1)]),e("p",null,[ge,a(" "+s(l.value.anio),1)]),e("p",null,[fe,a(" "+s(l.value.nombre_programa),1)]),e("p",null,[he,a(" "+s(l.value.nombre_escuela),1)]),e("p",null,[be,a(" "+s(l.value.filial),1)])]),e("div",xe,[ye,e("div",we,[(f(),x(V,null,$(11,t=>e("p",{key:t},[e("strong",null,"Competencia "+s(t)+":",1),a(" "+s(l.value[`competencia_${t}`]),1)])),64))])])])])):q("",!0)]),_:1},8,["visible"])])]),_:1})}}},$e=G(ke,[["__scopeId","data-v-88be1192"]]);export{$e as default};
