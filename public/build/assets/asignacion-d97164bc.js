import{A as K}from"./LayoutSupervisor-242464d1.js";import{o as h,c as E,n as C,a4 as S,s as z,i as y,w as n,a as t,z as D,e as a,F as j,A as M,h as _,t as w,u as X,r as u,j as ee,k as g,b as l,Z as le}from"./app-10671afe.js";import{b as P,s as te,a as N}from"./column.esm-f729bb39.js";import{c as $,a as I,b as ae,s as oe}from"./TopMenu-c76ff7d1.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-0973fc8a.js";var B={name:"Textarea",emits:["update:modelValue"],props:{modelValue:null,autoResize:Boolean},mounted(){this.$el.offsetParent&&this.autoResize&&this.resize()},updated(){this.$el.offsetParent&&this.autoResize&&this.resize()},methods:{resize(){const i=window.getComputedStyle(this.$el);this.$el.style.height="auto",this.$el.style.height=`calc(${i.borderTopWidth} + ${i.borderBottomWidth} + ${this.$el.scrollHeight}px)`,parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden"},onInput(i){this.autoResize&&this.resize(),this.$emit("update:modelValue",i.target.value)}},computed:{filled(){return this.modelValue!=null&&this.modelValue.toString().length>0}}};const ie=["value"];function se(i,r,p,v,c,o){return h(),E("textarea",{class:C(["p-inputtextarea p-inputtext p-component",{"p-filled":o.filled,"p-inputtextarea-resizable ":p.autoResize}]),value:p.modelValue,onInput:r[0]||(r[0]=(...b)=>o.onInput&&o.onInput(...b))},null,42,ie)}function ne(i,r){r===void 0&&(r={});var p=r.insertAt;if(!(!i||typeof document>"u")){var v=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",p==="top"&&v.firstChild?v.insertBefore(c,v.firstChild):v.appendChild(c),c.styleSheet?c.styleSheet.cssText=i:c.appendChild(document.createTextNode(i))}}var re=`
.p-inputtextarea-resizable {
    overflow: hidden;
    resize: none;
}
.p-fluid .p-inputtextarea {
    width: 100%;
}
`;ne(re);B.render=se;var F={name:"ConfirmDialog",props:{group:String,breakpoints:{type:Object,default:null},draggable:{type:Boolean,default:!0}},confirmListener:null,closeListener:null,data(){return{visible:!1,confirmation:null}},mounted(){this.confirmListener=i=>{i&&i.group===this.group&&(this.confirmation=i,this.confirmation.onShow&&this.confirmation.onShow(),this.visible=!0)},this.closeListener=()=>{this.visible=!1,this.confirmation=null},S.on("confirm",this.confirmListener),S.on("close",this.closeListener)},beforeUnmount(){S.off("confirm",this.confirmListener),S.off("close",this.closeListener)},methods:{accept(){this.confirmation.accept&&this.confirmation.accept(),this.visible=!1},reject(){this.confirmation.reject&&this.confirmation.reject(),this.visible=!1},onHide(){this.confirmation.onHide&&this.confirmation.onHide(),this.visible=!1}},computed:{header(){return this.confirmation?this.confirmation.header:null},message(){return this.confirmation?this.confirmation.message:null},blockScroll(){return this.confirmation?this.confirmation.blockScroll:!0},position(){return this.confirmation?this.confirmation.position:null},iconClass(){return["p-confirm-dialog-icon",this.confirmation?this.confirmation.icon:null]},acceptLabel(){return this.confirmation?this.confirmation.acceptLabel||this.$primevue.config.locale.accept:null},rejectLabel(){return this.confirmation?this.confirmation.rejectLabel||this.$primevue.config.locale.reject:null},acceptIcon(){return this.confirmation?this.confirmation.acceptIcon:null},rejectIcon(){return this.confirmation?this.confirmation.rejectIcon:null},acceptClass(){return["p-confirm-dialog-accept",this.confirmation?this.confirmation.acceptClass:null]},rejectClass(){return["p-confirm-dialog-reject",this.confirmation?this.confirmation.rejectClass||"p-button-text":null]},autoFocusAccept(){return this.confirmation.defaultFocus===void 0||this.confirmation.defaultFocus==="accept"},autoFocusReject(){return this.confirmation.defaultFocus==="reject"},closeOnEscape(){return this.confirmation?this.confirmation.closeOnEscape:!0}},components:{CDialog:$,CDButton:I}};const ce={class:"p-confirm-dialog-message"};function ue(i,r,p,v,c,o){const b=z("CDButton"),A=z("CDialog");return h(),y(A,{visible:c.visible,"onUpdate:visible":[r[2]||(r[2]=m=>c.visible=m),o.onHide],role:"alertdialog",class:"p-confirm-dialog",modal:!0,header:o.header,blockScroll:o.blockScroll,position:o.position,breakpoints:p.breakpoints,closeOnEscape:o.closeOnEscape,draggable:p.draggable},{footer:n(()=>[t(b,{label:o.rejectLabel,class:C(o.rejectClass),iconPos:"left",onClick:r[0]||(r[0]=m=>o.reject()),autofocus:o.autoFocusReject},{icon:n(m=>[D(i.$slots,"rejecticon",{},()=>[a("span",{class:C([o.rejectIcon,m.class])},null,2)])]),_:3},8,["label","class","autofocus"]),t(b,{label:o.acceptLabel,class:C(o.acceptClass),iconPos:"left",onClick:r[1]||(r[1]=m=>o.accept()),autofocus:o.autoFocusAccept},{icon:n(m=>[D(i.$slots,"accepticon",{},()=>[a("span",{class:C([o.acceptIcon,m.class])},null,2)])]),_:3},8,["label","class","autofocus"])]),default:n(()=>[i.$slots.message?(h(),y(M(i.$slots.message),{key:1,message:c.confirmation},null,8,["message"])):(h(),E(j,{key:0},[D(i.$slots,"icon",{class:"p-confirm-dialog-icon"},()=>[i.$slots.icon?(h(),y(M(i.$slots.icon),{key:0,class:"p-confirm-dialog-icon"})):c.confirmation.icon?(h(),E("span",{key:1,class:C(o.iconClass)},null,2)):_("",!0)]),a("span",ce,w(o.message),1)],64))]),_:3},8,["visible","header","blockScroll","position","breakpoints","closeOnEscape","draggable","onUpdate:visible"])}F.render=ue;const de={class:"flex justify-between items-start"},pe={class:"flex flex-wrap items-start",style:{gap:"1rem"}},me={class:"mb-3",style:{width:"240px"}},he={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},ve={class:"mb-3",style:{width:"240px"}},fe={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Ie={class:"mb-3",style:{width:"240px"}},be={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Ne={class:"p-input-icon-left"},Ae=a("i",{class:"pi pi-search"},null,-1),Oe={class:"mt-3"},Ce=a("i",{class:"pi pi-download",style:{color:"green"}},null,-1),Ee={class:"flex"},ge={class:"mr-2"},ye={class:"flex"},Ue={class:"mr-2"},Re={key:0},we={key:1},Se={key:2},Pe={class:"mr-2"},_e=a("div",null,null,-1),xe={class:"w-full"},Le={class:"flex justify-end"},Me={__name:"asignacion",setup(i){const r=X(),p=(d,s,e)=>{r.add({severity:d,summary:s,detail:e,life:3e3})},v=u(!1),c=ee(),o=u(1),b=u(null),A=u(null),m=u(null),U=u(null),x=u(null),k=u(0),T=u([]),G=u(10),V=u([{value:"2024-I",label:"2024-I"},{value:"2024-II",label:"2024-II"},{value:"2025-I",label:"2025-I"}]),H=u([{value:"Dictantes",label:"Dictantes"},{value:"Informe",label:"Informe"},{value:"Plan",label:"Plan"},{value:"Resolucion",label:"Resolucion"},{value:"Otro",label:"Otro"}]);u([{value:1,label:"Aceptado"},{value:0,label:"Rechazado"},{value:null,label:"Pendiente"}]);const f=async()=>{let d=await axios.post("get-documentos?page="+o.value,{term:b.value,paginashoja:G.value,programa:A.value,periodo:m.value,tipo:U.value,aceptado:x.value});T.value=d.data.datos.data,k.value=d.data.datos.total},Y=d=>{window.open("../"+d,"_blank")},R=u({}),Z=async()=>{await axios.post("observar-documento",R.value),f(),p("info","DOCUMENTO OBSERVADO",""),v.value=!1,R.value={}},L=async d=>{await axios.post("cambiar-estado-documento",d),f(),p("info","ESTADO MODIFICADO","")},J=d=>{c.require({message:"¿Está seguro de cambiar el período?",header:"Confirmar cambio de período",icon:"pi pi-exclamation-triangle",accept:async()=>{try{await axios.post("cambiar-periodo-documento",{id:d.id,periodo:d.periodo}),f(),p("info","PERIODO MODIFICADO","")}catch{p("error","ERROR","No se pudo cambiar el periodo.")}},reject:()=>{p("info","Cambio cancelado","No se realizó ningún cambio.")}})},Q=d=>{v.value=!0,R.value=d},W=()=>{A.value=null,m.value=null,U.value=null,x.value=null,b.value=null,f()};g(b,()=>{f()}),g(A,()=>{f()}),g(m,()=>{f()}),g(U,()=>{f()}),g(x,()=>{f()}),g(G,()=>{f()});const q=u([{value:1,label:"INGENIERIA AGRONOMICA - PUNO"},{value:2,label:"INGENIERIA AGROINDUSTRIAL - PUNO"},{value:3,label:"INGENIERIA TOPOGRAFICA Y AGRIMENSURA - PUNO"},{value:4,label:"MEDICINA VETERINARIA Y ZOOTECNIA - PUNO"},{value:5,label:"INGENIERIA ECONOMICA - PUNO"},{value:6,label:"CIENCIAS CONTABLES - PUNO"},{value:7,label:"ADMINISTRACION - PUNO"},{value:8,label:"TRABAJO SOCIAL - PUNO"},{value:9,label:"ENFERMERIA - PUNO"},{value:10,label:"INGENIERIA DE MINAS - PUNO"},{value:11,label:"HUMANIDADES - PUNO"},{value:12,label:"SOCIOLOGIA - PUNO"},{value:13,label:"TURISMO - PUNO"},{value:14,label:"ANTROPOLOGIA - PUNO"},{value:15,label:"CIENCIAS DE LA COMUNICACION SOCIAL - PUNO"},{value:16,label:"ARTE - PUNO"},{value:17,label:"BIOLOGIA - PUNO"},{value:18,label:"EDUCACION SECUNDARIA - PUNO"},{value:19,label:"EDUCACION PRIMARIA - PUNO"},{value:20,label:"EDUCACION INICIAL - PUNO"},{value:21,label:"EDUCACION FISICA - PUNO"},{value:22,label:"INGENIERIA ESTADISTICA E INFORMATICA - PUNO"},{value:23,label:"DERECHO - PUNO"},{value:24,label:"INGENIERIA QUIMICA - PUNO"},{value:25,label:"ODONTOLOGIA - PUNO"},{value:26,label:"NUTRICION HUMANA - PUNO"},{value:27,label:"INGENIERIA GEOLOGICA - PUNO"},{value:28,label:"INGENIERIA METALURGICA - PUNO"},{value:29,label:"INGENIERIA CIVIL - PUNO"},{value:30,label:"ARQUITECTURA Y URBANISMO - PUNO"},{value:31,label:"CIENCIAS FISICO MATEMATICAS - PUNO"},{value:32,label:"INGENIERIA AGRICOLA - PUNO"},{value:33,label:"MEDICINA HUMANA - PUNO"},{value:34,label:"INGENIERIA MECANICA ELECTRICA - PUNO"},{value:35,label:"INGENIERIA ELECTRONICA - PUNO"},{value:36,label:"INGENIERIA DE SISTEMAS - PUNO"},{value:37,label:"PSICOLOGIA - PUNO"},{value:38,label:"INGENIERIA ECONOMICA - AZANGARO"},{value:39,label:"INGENIERIA DE MINAS - AZANGARO"},{value:40,label:"INGENIERIA TELECOMUNICACIONES - AZANGARO"},{value:41,label:"CIENCIAS CONTABLES - JULI"},{value:42,label:"ARQUITECTURA Y URBANISMO - JULI"},{value:43,label:"INGENIERIA AGROINDUSTRIAL - JULI"}]);return f(),(d,s)=>(h(),E(j,null,[t(l(le),{title:"Documentos"}),t(K,null,{default:n(()=>[a("div",de,[t(l(F)),a("div",pe,[a("div",me,[t(l(P),{modelValue:A.value,"onUpdate:modelValue":s[0]||(s[0]=e=>A.value=e),options:q.value,filter:"",optionLabel:"label",optionValue:"value",placeholder:"Seleccione escuela profesional",style:{width:"100%"},class:"w-full md:w-11rem"},{option:n(e=>[a("div",he,[a("div",null,w(e.option.label),1)])]),_:1},8,["modelValue","options"])]),a("div",ve,[t(l(P),{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),options:V.value,filter:"",optionLabel:"label",optionValue:"value",placeholder:"Seleccione periodo",style:{width:"100%"},class:"w-full md:w-11rem"},{option:n(e=>[a("div",fe,[a("div",null,w(e.option.label),1)])]),_:1},8,["modelValue","options"])]),a("div",Ie,[t(l(P),{modelValue:U.value,"onUpdate:modelValue":s[2]||(s[2]=e=>U.value=e),options:H.value,filter:"",optionLabel:"label",optionValue:"value",placeholder:"Seleccione tipo de documento",style:{width:"100%"},class:"w-full md:w-11rem"},{option:n(e=>[a("div",be,[a("div",null,w(e.option.label),1)])]),_:1},8,["modelValue","options"])]),t(l(I),{label:"Limpiar filtros",icon:"pi pi-filter-slash",class:"p-button-secondary",onClick:W})]),a("div",null,[a("span",Ne,[Ae,t(l(ae),{modelValue:b.value,"onUpdate:modelValue":s[3]||(s[3]=e=>b.value=e),placeholder:"Buscar"},null,8,["modelValue"])])])]),a("div",Oe,[t(l(te),{showGridlines:!1,value:T.value,paginator:"",rows:10,totalRecords:k.value,rowsPerPageOptions:[10,20,50],currentPage:o.value,class:C("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"}},{default:n(()=>[t(l(N),{field:"periodo",header:"Periodo"}),t(l(N),{field:"periodo",header:"Periodo Mod",width:"150px"},{body:n(({data:e})=>[t(l(P),{modelValue:e.periodo,"onUpdate:modelValue":O=>e.periodo=O,options:V.value,optionLabel:"label",optionValue:"value",placeholder:"Seleccione periodo",onChange:O=>J(e),style:{width:"100%"},class:"w-full md:w-11rem"},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1}),t(l(N),{field:"tipo",header:"TIPO"}),t(l(N),{field:"escuela",header:"ESCUELA PROFESIONAL"}),t(l(N),{field:"fecha_subida",header:"FECHA"}),t(l(N),{field:"username",header:"USUARIO"}),t(l(N),{field:"url",header:"Ver Documento",style:{"min-width":"12rem"}},{body:n(({data:e})=>[t(l(I),{label:"Link",onClick:O=>Y(e.url),link:""},{default:n(()=>[Ce]),_:2},1032,["onClick"])]),_:1}),t(l(N),{field:"id_programa",header:"Estado",width:"90px"},{body:n(({data:e})=>[a("div",Ee,[a("div",ge,[e.aceptado===1?(h(),y(l(I),{key:0,severity:"success",label:"Aceptado","aria-label":"Submit",size:"small",style:{width:"90px",height:"25px"}})):e.aceptado===0?(h(),y(l(I),{key:1,severity:"danger",label:"Rechazado","aria-label":"Submit",size:"small",style:{width:"90px",height:"25px"}})):(h(),y(l(I),{key:2,severity:"secondary",label:"Pendiente","aria-label":"Submit",size:"small",style:{width:"90px",height:"25px"}}))])])]),_:1}),t(l(N),{header:"Observaciones"},{body:n(({data:e})=>[a("div",null,w(e.obser),1)]),_:1}),t(l(N),{field:"id_programa",header:"Acciones",width:"90px"},{body:n(({data:e})=>[a("div",ye,[a("div",Ue,[e.aceptado==1?(h(),E("div",Re,[t(l(I),{severity:"success",icon:"pi pi-check","aria-label":"Submit",onClick:O=>L(e),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])):_("",!0),e.aceptado==0?(h(),E("div",we,[t(l(I),{severity:"danger",icon:"pi pi-times","aria-label":"Submit",onClick:O=>L(e),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])):_("",!0),e.aceptado==null?(h(),E("div",Se,[t(l(I),{severity:"secondary",icon:"pi pi-spinner",label:"",onClick:O=>L(e),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])):_("",!0)]),a("div",Pe,[t(l(I),{class:"secondary",icon:"pi pi-pencil","aria-label":"Submit",onClick:O=>Q(e),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])])]),_:1})]),_:1},8,["value","totalRecords","currentPage"]),_e]),t(l($),{visible:v.value,"onUpdate:visible":s[6]||(s[6]=e=>v.value=e),modal:"",header:"Observación",style:{width:"25rem"}},{footer:n(()=>[a("div",Le,[t(l(I),{icon:"pi pi-save",label:"Observar",severity:"success","aria-label":"Submit",onClick:s[5]||(s[5]=e=>Z()),size:"small",style:{height:"25px"}})])]),default:n(()=>[a("div",xe,[a("div",null,[t(l(B),{modelValue:R.value.obser,"onUpdate:modelValue":s[4]||(s[4]=e=>R.value.obser=e),style:{width:"100%"},variant:"filled",rows:"6"},null,8,["modelValue"])])])]),_:1},8,["visible"]),t(l(oe))]),_:1})],64))}};export{Me as default};
