import{A as F}from"./AuthenticatedLayout-fa909f7a.js";import{u as L,h as q,r as d,i as j,c as y,a as t,b as i,w as r,F as G,o as b,Z,d as a,n as H,g as E,p as J,l as K}from"./app-b68d7e87.js";import{a as p,b as c,s as M,c as O}from"./TopMenu-3107d69f.js";import{s as P,a as v,b as Q}from"./column.esm-3fd029fa.js";import{s as R,a as W}from"./confirmpopup.esm-fcb70c7b.js";import{s as N}from"./tag.esm-53901d89.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";const n=m=>(J("data-v-e754869a"),m=m(),K(),m),Y={class:"bg-white shadow-xs p-4",style:{height:"calc(100vh - 110px)"}},ee={class:"flex",style:{"justify-content":"space-between"}},le={class:"p-input-icon-left"},ae=n(()=>a("i",{class:"pi pi-search"},null,-1)),se={class:"card"},te=n(()=>a("div",{class:"flex justify-content-center mb-4"},null,-1)),oe={class:"flex",style:{"justify-content":"center"}},ie={key:0},de={key:1},ne={class:"flex"},ue={class:"mr-2"},re={class:"flex mt-2 align-items-center",style:{"justify-content":"flex-end"}},ce=n(()=>a("div",{class:"mr-3"},[a("label",null,"Estado")],-1)),ve={class:"flex",style:{width:"100%","justify-content":"space-between"}},pe={class:"mb-2",style:{width:"48%"}},me=n(()=>a("div",null,[a("label",null,"Nombres")],-1)),he={class:"mb-2",style:{width:"48%"}},_e=n(()=>a("div",null,[a("label",null,"Apellidos")],-1)),fe={class:"flex",style:{width:"100%","justify-content":"space-between"}},ye={class:"mb-2",style:{width:"48%"}},be=n(()=>a("div",null,[a("label",null,"Dni")],-1)),xe={class:"mb-2",style:{width:"48%"}},we=n(()=>a("div",null,[a("label",null,"Celular")],-1)),ge={class:"mb-2"},Ve=n(()=>a("div",null,[a("label",null,"Correo")],-1)),Ce={class:"mb-2"},ke=n(()=>a("div",null,[a("label",null,"Escuela")],-1)),$e={class:"flex",style:{"justify-content":"flex-end"}},je={__name:"index",setup(m){const x=L(),S=q(),w=d([]),U=d(0),z=d(1),h=d("");d([]);const g=d([]),u=d(!1),f=d("Nuevo Coordinador"),e=d({id:null,nombres:"",apellidos:"",escuela:null,dni:"",email:"",celular:"",estado:!0}),_=async o=>{let l=await axios.post("/coordinador/get-coordinadores?page="+z.value,{term:h.value});g.value=l.data.datos.data,U.value=l.data.datos.total},V=async()=>{let o=await axios.post("/coordinador/get-escuelas",{term:""});w.value=o.data.datos.data,e.value.escuela=o.data.datos.data[0].value},A=async()=>{let o=await axios.post("/coordinador/save-coordinador",{id:e.value.id,nombres:e.value.nombres,apellidos:e.value.apellidos,email:e.value.email,escuela:e.value.escuela,estado:e.value.estado,dni:e.value.dni,celular:e.value.celular});C(o.data.tipo,o.data.titulo,o.data.mensaje),_(),u.value=!1,k()},I=async o=>{let l=await axios.get("/coordinador/delete-coordinador/"+o);C(l.data.tipo,l.data.titulo,l.data.mensaje),_()},D=()=>{f.value="Nuevo Coordinador",u.value=!0},B=async o=>{f.value="Editar Coordinador",u.value=!0,e.value.id=o.id,e.value.nombres=o.nombres,e.value.apellidos=o.apellidos,e.value.email=o.correo,e.value.escuela=o.id_escuela,e.value.dni=o.dni,e.value.celular=o.celular,o.estado==1?e.value.estado=!0:e.value.estado=!1,console.log(o)};j(h,(o,l)=>{_()});const C=(o,l,s)=>{x.add({severity:o,summary:l,detail:s,life:3e3})},T=(o,l)=>{S.require({target:o.currentTarget,message:"¿Estas seguro de eliminar al coordinador "+l.nombres+"?",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{I(l.id)},reject:()=>{x.add({severity:"error",summary:"Elimación cancelada",detail:"Se ha cancelado la eliminación del coordinador"+l.nombres,life:3e3})}})};j(u,(o,l)=>{u.value==!1&&e.value.id!=null&&k()});const k=()=>{e.value.id=null,e.value.nombres="",e.value.apellidos="",e.value.dni="",e.value.celular="",e.value.email="",e.value.estado=!0};return _(),V(),(o,l)=>(b(),y(G,null,[t(i(Z),{title:"Coordinadores"}),t(F,null,{default:r(()=>[a("div",Y,[a("div",null,[a("div",ee,[t(i(p),{label:"Nuevo",onClick:l[0]||(l[0]=s=>D()),size:"small",style:{height:"40px"}}),a("span",le,[ae,t(i(c),{modelValue:h.value,"onUpdate:modelValue":l[1]||(l[1]=s=>h.value=s),class:"lt",style:{"padding-left":"40px",height:"40px"},placeholder:"Search"},null,8,["modelValue"])])])]),t(i(M)),t(i(R)),a("div",null,[a("div",se,[te,t(i(P),{value:g.value,class:H("p-datatable-sm lt"),tableStyle:"min-width: 50rem"},{default:r(()=>[t(i(v),{field:"dni",header:"DNI"}),t(i(v),{field:"nombres",header:"Nombres"}),t(i(v),{field:"apellidos",header:"Apellidos"}),t(i(v),{field:"escuela",header:"Escuela"}),t(i(v),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Estado",width:"70px"},{body:r(({data:s})=>[a("div",oe,[s.estado===1?(b(),y("div",ie,[t(i(N),{severity:"info",value:"Activo"})])):E("",!0),s.estado===0?(b(),y("div",de,[t(i(N),{style:{background:"#CDCDCD"},value:"Inactivo"})])):E("",!0)])]),_:1}),t(i(v),{field:"id_programa",header:"Acciones",width:"90px"},{body:r(({data:s})=>[a("div",ne,[a("div",ue,[t(i(p),{class:"secondary",icon:"pi pi-pencil","aria-label":"Submit",onClick:$=>B(s),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])]),t(i(p),{icon:"pi pi-trash",severity:"danger","aria-label":"Submit",onClick:$=>T($,s),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])]),_:1})]),_:1},8,["value"])])]),t(i(O),{visible:u.value,"onUpdate:visible":l[10]||(l[10]=s=>u.value=s),modal:"",header:f.value,style:{width:"50vw"}},{footer:r(()=>[a("div",$e,[a("div",null,[t(i(p),{label:"Cancelar",outlined:"",onClick:l[9]||(l[9]=s=>u.value=!1),size:"small"})]),t(i(p),{label:"Guardar",onClick:A,size:"small"})])]),default:r(()=>[a("div",re,[ce,t(i(W),{modelValue:e.value.estado,"onUpdate:modelValue":l[2]||(l[2]=s=>e.value.estado=s)},null,8,["modelValue"])]),a("div",ve,[a("div",pe,[me,t(i(c),{style:{width:"100%",height:"40px"},type:"text",modelValue:e.value.nombres,"onUpdate:modelValue":l[3]||(l[3]=s=>e.value.nombres=s)},null,8,["modelValue"])]),a("div",he,[_e,t(i(c),{style:{width:"100%",height:"40px"},type:"text",modelValue:e.value.apellidos,"onUpdate:modelValue":l[4]||(l[4]=s=>e.value.apellidos=s)},null,8,["modelValue"])])]),a("div",fe,[a("div",ye,[be,t(i(c),{style:{width:"100%",height:"40px"},type:"text",modelValue:e.value.dni,"onUpdate:modelValue":l[5]||(l[5]=s=>e.value.dni=s)},null,8,["modelValue"])]),a("div",xe,[we,t(i(c),{style:{width:"100%",height:"40px"},type:"text",modelValue:e.value.celular,"onUpdate:modelValue":l[6]||(l[6]=s=>e.value.celular=s)},null,8,["modelValue"])])]),a("div",ge,[Ve,t(i(c),{style:{width:"100%",height:"40px"},type:"text",modelValue:e.value.email,"onUpdate:modelValue":l[7]||(l[7]=s=>e.value.email=s)},null,8,["modelValue"])]),a("div",Ce,[ke,t(i(Q),{modelValue:e.value.escuela,"onUpdate:modelValue":l[8]||(l[8]=s=>e.value.escuela=s),showClear:"",style:{height:"45px"},options:w.value,onComplete:V,optionValue:"value",optionLabel:"label",placeholder:"Selecciona el programa",class:"w-full md:w-14rem"},null,8,["modelValue","options"])])]),_:1},8,["visible","header"])])]),_:1})],64))}},De=X(je,[["__scopeId","data-v-e754869a"]]);export{De as default};
