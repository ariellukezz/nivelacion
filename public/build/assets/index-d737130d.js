import{r,L as k,i as D,w as n,d as S,o as I,a as t,b as l,Z as N,e as s,t as i,f as _,p as B,m as R}from"./app-49ebdfbb.js";import{A as T}from"./LayoutSupervisor-e8bb2374.js";import{b as C,a as m,s as U}from"./column.esm-69627d5b.js";import{b as $,a as F}from"./TopMenu-dd724cd6.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-afaa0fd7.js";const b=f=>(B("data-v-9f470631"),f=f(),R(),f),E={class:"p-4 bg-white rounded-lg shadow"},M=b(()=>s("h2",{class:"text-xl font-semibold mb-4"},"Docentes por Competencias",-1)),G={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},O={class:"p-input-icon-left"},Z=b(()=>s("i",{class:"pi pi-search"},null,-1)),j={class:"mb-4"},q={class:"font-medium"},z={class:"text-sm text-gray-500"},H={class:"text-sm text-gray-500"},J={class:"font-semibold"},K={class:"text-gray-400"},Q=b(()=>s("div",{class:"text-center py-8 text-gray-500"},[s("i",{class:"pi pi-info-circle mr-2"}),_(" No se encontraron resultados ")],-1)),W=b(()=>s("div",{class:"text-center py-8"},[s("i",{class:"pi pi-spinner pi-spin mr-2"}),_(" Cargando datos... ")],-1)),X={__name:"index",setup(f){const h=r([]),v=r([]),c=r(""),d=r(null),p=r(null),u=r(null),L=r([]),x=r([]),y=r([]),w=r(!0),V=async()=>{try{w.value=!0;const a=await S.get("docentes-competencias-data");a.data.success?(h.value=a.data.data.docentes,v.value=a.data.data.docentes,L.value=a.data.data.filtros.programas,x.value=a.data.data.filtros.periodos,y.value=a.data.data.filtros.competencias):console.error("Error en la respuesta:",a.data.message)}catch(a){console.error("Error al obtener docentes:",a)}finally{w.value=!1}},g=()=>{let a=h.value;if(c.value){const o=c.value.toLowerCase();a=a.filter(e=>e.paterno&&e.paterno.toLowerCase().includes(o)||e.materno&&e.materno.toLowerCase().includes(o)||e.nombres&&e.nombres.toLowerCase().includes(o)||e.email&&e.email.toLowerCase().includes(o)||e.telefono&&e.telefono.toLowerCase().includes(o)||e.competencia_nombre&&e.competencia_nombre.toLowerCase().includes(o)||e.curso_nombre&&e.curso_nombre.toLowerCase().includes(o)||e.programa&&e.programa.toLowerCase().includes(o)||e.periodo_nombre&&e.periodo_nombre.toLowerCase().includes(o))}d.value&&(a=a.filter(o=>o.programa_id===d.value)),p.value&&(a=a.filter(o=>o.id_periodo===p.value)),u.value&&(a=a.filter(o=>o.id_competencia===u.value)),v.value=a},P=()=>{c.value="",d.value=null,p.value=null,u.value=null,v.value=h.value};return k(V),(a,o)=>(I(),D(T,null,{default:n(()=>[t(l(N),{title:"Docentes por Competencias"}),s("div",E,[M,s("div",G,[s("span",O,[Z,t(l($),{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=e=>c.value=e),placeholder:"Buscar docentes...",class:"w-full",onInput:g},null,8,["modelValue"])]),t(l(C),{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=e=>d.value=e),options:L.value,optionLabel:"programa",optionValue:"programa_id",placeholder:"Seleccionar Programa",class:"w-full",onChange:g,showClear:""},null,8,["modelValue","options"]),t(l(C),{modelValue:p.value,"onUpdate:modelValue":o[2]||(o[2]=e=>p.value=e),options:x.value,optionLabel:"periodo_nombre",optionValue:"id_periodo",placeholder:"Seleccionar Periodo",class:"w-full",onChange:g,showClear:""},null,8,["modelValue","options"]),t(l(C),{modelValue:u.value,"onUpdate:modelValue":o[3]||(o[3]=e=>u.value=e),options:y.value,optionLabel:"competencia_nombre",optionValue:"id_competencia",placeholder:"Seleccionar Competencia",class:"w-full",onChange:g,showClear:""},null,8,["modelValue","options"])]),s("div",j,[t(l(F),{label:"Limpiar Filtros",icon:"pi pi-times",class:"p-button-outlined p-button-sm",onClick:P})]),t(l(U),{value:v.value,loading:w.value,stripedRows:"",paginator:"",rows:10,rowsPerPageOptions:[10,25,50],class:"p-datatable-sm",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} docentes",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},{empty:n(()=>[Q]),loading:n(()=>[W]),default:n(()=>[t(l(m),{field:"docente",header:"Docente",sortable:""},{body:n(({data:e})=>[s("div",q,i(e.paterno)+" "+i(e.materno)+", "+i(e.nombres),1),s("div",z,i(e.email),1),s("div",H,i(e.telefono),1)]),_:1}),t(l(m),{field:"competencia",header:"Competencia",sortable:""},{body:n(({data:e})=>[s("span",J,i(e.competencia_cod),1),_(" - "+i(e.competencia_nombre),1)]),_:1}),t(l(m),{field:"curso",header:"Curso",sortable:""},{body:n(({data:e})=>[_(i(e.curso_nombre)+" ",1),s("span",K,"(Grupo "+i(e.grupo)+")",1)]),_:1}),t(l(m),{field:"programa",header:"Programa",sortable:""}),t(l(m),{field:"periodo",header:"Periodo",sortable:""},{body:n(({data:e})=>[_(i(e.periodo_nombre),1)]),_:1})]),_:1},8,["value","loading"])])]),_:1}))}},le=A(X,[["__scopeId","data-v-9f470631"]]);export{le as default};
