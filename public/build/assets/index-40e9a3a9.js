import{A as T}from"./AuthenticatedLayout-bf95ed2f.js";import{u as q,g as F,r,h as U,c as f,a as t,b as i,w as u,F as G,o as y,Z as O,d as a,n as Z,f as S,p as H,q as J}from"./app-0a063d8c.js";import{a as c,b as m,s as K,c as M}from"./NavigationMobile-d5c59578.js";import{s as Q,a as p,b as N}from"./column.esm-5c27a366.js";import{s as W,a as X}from"./confirmpopup.esm-bf9daf02.js";import{s as z}from"./tag.esm-1b9dc691.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";const d=v=>(H("data-v-9f087a77"),v=v(),J(),v),ee={class:"bg-white shadow-xs p-4",style:{height:"calc(100vh - 110px)"}},le={class:"flex",style:{"justify-content":"space-between"}},ae={class:"p-input-icon-left"},se=d(()=>a("i",{class:"pi pi-search"},null,-1)),te={class:"card"},oe=d(()=>a("div",{class:"flex justify-content-center mb-4"},null,-1)),ie={class:"flex",style:{"justify-content":"center"}},de={key:0},ne={key:1},re={class:"flex"},ue={class:"mr-2"},pe={class:"flex mt-2 align-items-center",style:{"justify-content":"flex-end"}},ce=d(()=>a("div",{class:"mr-3"},[a("label",null,"Estado")],-1)),me={class:"flex",style:{width:"100%","justify-content":"space-between"}},ve={class:"mb-2",style:{width:"48%"}},he=d(()=>a("div",null,[a("label",null,"Nombres")],-1)),_e={class:"mb-2",style:{width:"48%"}},fe=d(()=>a("div",null,[a("label",null,"Apellidos")],-1)),ye={class:"mb-2"},be=d(()=>a("div",null,[a("label",null,"Rol")],-1)),ge={class:"flex",style:{width:"100%","justify-content":"space-between"}},we={class:"mb-2",style:{width:"48%"}},xe=d(()=>a("div",null,[a("label",null,"Correo")],-1)),Ve={class:"mb-2",style:{width:"48%"}},Ce=d(()=>a("div",null,[a("label",null,"Contraseña")],-1)),ke={class:"mb-2"},$e=d(()=>a("div",null,[a("label",null,"Programa")],-1)),je={class:"flex",style:{"justify-content":"flex-end"}},Ue={__name:"index",setup(v){const b=q(),A=F(),g=r([]),E=r(0),w=r(1),h=r(""),x=r([]),V=r([]),n=r(!1),l=r({id:null,nombres:"",apellidos:"",rol:2,programa:3,email:"",password:"",estado:!0}),_=async o=>{let e=await axios.post("get-usuarios?page="+w.value,{term:h.value});V.value=e.data.datos.data,E.value=e.data.datos.total},C=async()=>{let o=await axios.post("get-programas?page="+w.value,{term:""});g.value=o.data.datos.data},I=async(o="")=>{let e=await axios.post("get-roles?page=",{term:""});x.value=e.data.datos.data},R=async()=>{let o=await axios.post("save-usuario",{id:l.value.id,nombres:l.value.nombres,apellidos:l.value.apellidos,email:l.value.email,password:l.value.password,programa:l.value.programa,estado:l.value.estado,rol:l.value.rol});k(o.data.tipo,o.data.titulo,o.data.mensaje),_(),n.value=!1,$()},L=async o=>{let e=await axios.get("delete-usuario/"+o);k(e.data.tipo,e.data.titulo,e.data.mensaje),_()},B=async o=>{n.value=!0,l.value.id=o.id,l.value.nombres=o.nombres,l.value.apellidos=o.apellidos,l.value.email=o.email,l.value.programa=o.id_programa,l.value.rol=o.id_rol,console.log(o)},D=o=>{console.log("::ROL::",o)};U(h,(o,e)=>{_()});const k=(o,e,s)=>{b.add({severity:o,summary:e,detail:s,life:3e3})},P=(o,e)=>{A.require({target:o.currentTarget,message:"¿Estas seguro de eliminar al usuario "+e.nombres+"?",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{L(e.id)},reject:()=>{b.add({severity:"error",summary:"Elimación cancelada",detail:"Se ha cancelado la eliminación del usuario"+e.nombres,life:3e3})}})};U(n,(o,e)=>{n.value==!1&&l.value.id!=null&&$()});const $=()=>{l.value.id=null,l.value.nombres="",l.value.apellidos="",l.value.rol=2,l.value.programa=3,l.value.email="",l.value.password="",l.value.estado=!0};return _(),C(),I(),(o,e)=>(y(),f(G,null,[t(i(O),{title:"Usuarios"}),t(T,null,{default:u(()=>[a("div",ee,[a("div",null,[a("div",le,[t(i(c),{label:"Nuevo",onClick:e[0]||(e[0]=s=>n.value=!0),size:"small",style:{height:"40px"}}),a("span",ae,[se,t(i(m),{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=s=>h.value=s),class:"lt",style:{"padding-left":"40px",height:"40px"},placeholder:"Search"},null,8,["modelValue"])])])]),t(i(K)),t(i(W)),a("div",null,[a("div",te,[oe,t(i(Q),{value:V.value,class:Z("p-datatable-sm lt"),tableStyle:"min-width: 50rem"},{default:u(()=>[t(i(p),{field:"nombres",header:"Nombres"}),t(i(p),{field:"apellidos",header:"Apellidos"}),t(i(p),{field:"programa",header:"Programa"}),t(i(p),{field:"rol",header:"Rol"}),t(i(p),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Estado",width:"70px"},{body:u(({data:s})=>[a("div",ie,[s.estado===1?(y(),f("div",de,[t(i(z),{severity:"info",value:"Activo"})])):S("",!0),s.estado===0?(y(),f("div",ne,[t(i(z),{style:{background:"#CDCDCD"},value:"Inactivo"})])):S("",!0)])]),_:1}),t(i(p),{field:"id_programa",header:"Acciones",width:"90px"},{body:u(({data:s})=>[a("div",re,[a("div",ue,[t(i(c),{class:"secondary",icon:"pi pi-pencil","aria-label":"Submit",onClick:j=>B(s),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])]),t(i(c),{icon:"pi pi-trash",severity:"danger","aria-label":"Submit",onClick:j=>P(j,s),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])]),_:1})]),_:1},8,["value"])])]),t(i(M),{visible:n.value,"onUpdate:visible":e[10]||(e[10]=s=>n.value=s),modal:"",header:"Nuevo usuario",style:{width:"50vw"}},{footer:u(()=>[a("div",je,[a("div",null,[t(i(c),{label:"Cancelar",outlined:"",onClick:e[9]||(e[9]=s=>n.value=!1),size:"small"})]),t(i(c),{label:"Guardar",onClick:R,size:"small"})])]),default:u(()=>[a("div",pe,[ce,t(i(X),{modelValue:l.value.estado,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.estado=s)},null,8,["modelValue"])]),a("div",me,[a("div",ve,[he,t(i(m),{style:{width:"100%",height:"40px"},type:"text",modelValue:l.value.nombres,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.nombres=s)},null,8,["modelValue"])]),a("div",_e,[fe,t(i(m),{style:{width:"100%",height:"40px"},type:"text",modelValue:l.value.apellidos,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.apellidos=s)},null,8,["modelValue"])])]),a("div",ye,[be,t(i(N),{modelValue:l.value.rol,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.rol=s),optionValue:"value",options:x.value,showClear:"",style:{height:"45px"},onComplete:D,optionLabel:"label",placeholder:"Selecciona el rol",class:"w-full md:w-10rem"},null,8,["modelValue","options"])]),a("div",ge,[a("div",we,[xe,t(i(m),{style:{width:"100%",height:"40px"},type:"text",modelValue:l.value.email,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.email=s)},null,8,["modelValue"])]),a("div",Ve,[Ce,t(i(m),{style:{width:"100%",height:"40px"},type:"password",modelValue:l.value.password,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.password=s)},null,8,["modelValue"])])]),a("div",ke,[$e,t(i(N),{modelValue:l.value.programa,"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.programa=s),showClear:"",style:{height:"45px"},options:g.value,onComplete:C,optionValue:"value",optionLabel:"label",placeholder:"Selecciona el programa",class:"w-full md:w-14rem"},null,8,["modelValue","options"])])]),_:1},8,["visible"])])]),_:1})],64))}},Le=Y(Ue,[["__scopeId","data-v-9f087a77"]]);export{Le as default};
