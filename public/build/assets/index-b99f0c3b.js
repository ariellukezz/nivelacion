import{A as pe}from"./AuthenticatedLayout-2c6ba922.js";import{r as n,u as ve,i as me,j as y,c as p,a as t,b as l,w as u,F as fe,o as v,Z as he,d as e,k as z,t as _,h as m,n as A}from"./app-cb8fb1e1.js";import{a as f,b as D,s as ye,c as X}from"./NavigationMobile-7f0bdf32.js";import{b as S,s as U,a as d}from"./column.esm-fa93c92e.js";import{s as _e,a as ge}from"./confirmpopup.esm-f387ac0a.js";import{s as N}from"./tag.esm-22848eb5.js";import"./_plugin-vue_export-helper-c27b6911.js";const we={class:"flex mb-0",style:{"justify-content":"space-between","align-items":"center","margin-top":"0px","border-bottom":"solid 1px #cdcdcd9D",height:"50px",background:"white"}},be={class:"flex"},xe={key:0,class:"flex justify-content-center",style:{"align-items":"center"}},Ve=e("i",{class:"pi pi-angle-right"},null,-1),Ce={style:{"max-width":"180px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},ke={key:1,class:"flex justify-content-center",style:{"align-items":"center"}},je=e("i",{class:"pi pi-angle-right"},null,-1),ze={style:{"max-width":"180px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Ae={key:0},De={class:"flex mr-4",style:{"justify-content":"flex-end"}},Se={class:"p-input-icon-left"},Ue=e("i",{class:"pi pi-search"},null,-1),Ne={key:1},$e={class:"flex align-items-center",style:{width:"280px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},Ee={class:"bg-white shadow-xs p-4",style:{height:"calc(100vh - 140px)","font-family":"Arial, Helvetica, sans-serif"}},Be={key:0,class:"card"},Ge={key:0},Me={class:"flex",style:{"justify-content":"space-between"}},Ie={class:"flex mb-3",style:{"justify-content":"flex-end"}},Le={class:"p-input-icon-left"},Pe=e("i",{class:"pi pi-search"},null,-1),Te={class:"mt-3"},Fe={class:"flex",style:{"justify-content":"flex-start"}},Ke={class:"flex",style:{"justify-content":"center"}},qe={key:0},He={key:1},Re={class:"flex"},Xe={class:"mr-2"},Ze={key:1},Je={class:"flex",style:{"justify-content":"space-between"}},Oe={class:"flex mb-3",style:{"justify-content":"flex-end"}},Qe={class:"p-input-icon-left"},We=e("i",{class:"pi pi-search"},null,-1),Ye={class:"mt-3"},et={class:"flex",style:{"justify-content":"center"}},tt={key:0},lt={key:1},at={class:"flex mt-0 mb-3 align-items-center",style:{"justify-content":"flex-end"}},st=e("label",null,"Estado",-1),ot={class:"ml-3"},it={class:"flex",style:{width:"100%","justify-content":"space-between"}},nt={class:"mb-3",style:{width:"68%"}},dt=e("div",null,[e("label",null,"Nombre")],-1),ut={class:"mb-3",style:{width:"28%"}},rt=e("div",null,[e("label",null,"Grupo")],-1),ct={class:"flex align-items-center",style:{"font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},pt={class:"flex",style:{width:"100%","justify-content":"space-between"}},vt={class:"mb-3",style:{width:"100%"}},mt=e("div",null,[e("label",null,"Competencia")],-1),ft={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},ht={class:"flex",style:{width:"100%","justify-content":"space-between"}},yt={class:"mb-3",style:{width:"100%"}},_t=e("div",null,[e("label",null,"Docente")],-1),gt={class:"flex align-items-center",style:{width:"400px","font-size":"0.9rem","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},wt={class:"flex",style:{"justify-content":"flex-end"}},bt={key:0},xt={class:"flex",style:{width:"100%","justify-content":"flex-end"}},Ut={__name:"index",setup(Vt){const r=n(null),M=ve(),Z=me(),w=n(null),b=n([]),I=n([]),c=n(null),x=n(""),$=n([]),J=n([]),O=n(0),L=n(1),V=n(""),C=n(""),k=n(null),Q=n([]),h=n(!1);n(""),n("A");const W=n([{value:"A",label:"Grupo A"},{value:"B",label:"Grupo B"},{value:"C",label:"Grupo C"},{value:"D",label:"Grupo D"},{value:"E",label:"Grupo E"}]),E=n([]),P=n([]),Y=n(null),T=n([]),F=n([]),g=n(null),i=n({id:null,nombre:"",id_docente:"",grupo:"A",estado:!0}),B=async()=>{let o=await axios.post("/coordinador/get-docentes?page="+L.value,{term:V.value});Q.value=o.data.datos.data,O.value=o.data.datos.total},ee=async()=>{let o=await axios.post("/get-programas?page="+L.value,{term:""});J.value=o.data.datos.data},K=async()=>{let o=await axios.post("/get-escuelas",{term:C.value});T.value=o.data.datos.data},te=async()=>{let o=await axios.post("/coordinador/get-competencias?page=",{term:""});$.value=o.data.datos},le=async()=>{let o=await axios.post("/get-docente-competencia?page=",{term:"",competencia:g.value});P.value=o.data.datos.data,Y.value=o.data.datos.data[0].id},j=async()=>{let o=await axios.post("get-cursos?page=",{term:x.value,competencia:k.value,escuela:r.value.escuela});I.value=o.data.datos.data},q=n(!1),ae=async o=>{h.value=!0,q.value=!0,i.value.id=o.id,i.value.nombre=o.nombre,i.value.grupo=o.grupo,i.value.id_docente=o.id_docente,g.value=o.id_competencia,i.value.id=o.id,o.estado===1?i.value.estado=!0:i.value.estado=!1},se=async()=>{let o=await axios.post("save-curso",{id:i.value.id,nombre:i.value.nombre,id_competencia:g.value,id_docente:i.value.id_docente,escuela:r.value.escuela,grupo:i.value.grupo,estado:i.value.estado});G(o.data.tipo,o.data.titulo,o.data.mensaje),j(),h.value=!1,limpiar()},H=async()=>{let o=await axios.post("get-detalle-curso?page=",{term:"",curso:c.value.id});F.value=o.data.datos.data,b.value=o.data.registrados.data},oe=async()=>{let o=await axios.post("asignar-curso-nivelacion",{curso:c.value.id,alumnos:b.value});G(o.data.tipo,o.data.titulo,o.data.mensaje),H(),w.value=!1},ie=async o=>{let a=await axios.get("delete-docente/"+o);G(a.data.tipo,a.data.titulo,a.data.mensaje),B()},ne=async()=>{let o=await axios.post("/get-alumnos-registro?page=",{term:"",escuela:r.value.id,curso:c.value.id_competencia});E.value=o.data.datos};y(h,(o,a)=>{q.value==!0&&h.value==!1&&(h.value=!1,i.value.id=null,i.value.nombre=null,i.value.grupo=null,i.value.estado=!0)}),y(C,(o,a)=>{K()}),y(x,(o,a)=>{j()}),y(V,(o,a)=>{B()}),y(g,(o,a)=>{le()}),y(k,(o,a)=>{j()}),y(r,(o,a)=>{j()}),y(c,(o,a)=>{i.value=c.value,H(),ne()});const de=()=>{w.value=!0},G=(o,a,s)=>{M.add({severity:o,summary:a,detail:s,life:3e3})},ue=(o,a)=>{Z.require({target:o.currentTarget,message:"¿Estas seguro de eliminar al docente "+a.nombres+"?",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{ie(a.id)},reject:()=>{M.add({severity:"error",summary:"Elimación cancelada",detail:"Se ha cancelado la eliminación del docente "+a.nombres,life:3e3})}})},re=()=>{r.value=null,c.value=null},ce=()=>{c.value=null};return B(),ee(),te(),K(),(o,a)=>(v(),p(fe,null,[t(l(he),{title:"Nivelación"}),t(pe,null,{default:u(()=>[e("div",we,[e("div",be,[t(l(f),{severity:"secondary",style:{"font-size":"0.9rem"},text:"",onClick:re},{default:u(()=>[z(" Inicio ")]),_:1}),r.value!==null?(v(),p("div",xe,[Ve,t(l(f),{severity:"secondary",onClick:ce,style:{"font-size":"0.9rem"},text:""},{default:u(()=>[e("div",Ce,[e("span",null,_(r.value.escuela),1)])]),_:1})])):m("",!0),c.value!==null?(v(),p("div",ke,[je,t(l(f),{severity:"secondary",style:{"font-size":"0.9rem"},text:""},{default:u(()=>[e("div",ze,[e("span",null,_(c.value.nombre),1)])]),_:1})])):m("",!0)]),r.value===null?(v(),p("div",Ae,[e("div",De,[e("span",Se,[Ue,t(l(D),{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=s=>C.value=s),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])):m("",!0),r.value!==null&&c.value===null?(v(),p("div",Ne,[t(l(S),{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=s=>k.value=s),options:$.value,severity:"primary",optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"325px",height:"38px"},class:"w-full md:w-11rem mr-4"},{option:u(s=>[e("div",$e,[e("div",null,_(s.option.label),1)])]),_:1},8,["modelValue","options"])])):m("",!0)]),e("div",Ee,[e("div",null,[r.value===null?(v(),p("div",Be,[t(l(U),{selection:r.value,"onUpdate:selection":a[2]||(a[2]=s=>r.value=s),selectionMode:"single",value:T.value,class:A("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:10,filters:o.filters},{default:u(()=>[t(l(d),{field:"escuela",header:"Escuela"}),t(l(d),{field:"facultad",header:"Facultad"}),t(l(d),{field:"area",header:"Area"})]),_:1},8,["selection","value","filters"])])):m("",!0)]),r.value!==null&&c.value===null?(v(),p("div",Ge,[e("div",Me,[t(l(f),{severity:"primary",onClick:a[3]||(a[3]=s=>h.value=!0),style:{height:"40px"}},{default:u(()=>[z(" Nuevo Curso ")]),_:1}),e("div",null,[e("div",Ie,[e("span",Le,[Pe,t(l(D),{modelValue:x.value,"onUpdate:modelValue":a[4]||(a[4]=s=>x.value=s),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])]),e("div",Te,[t(l(U),{selection:c.value,"onUpdate:selection":a[5]||(a[5]=s=>c.value=s),selectionMode:"single",value:I.value,class:A("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:u(()=>[t(l(d),{field:"nombre",header:"Nombre"}),t(l(d),{field:"competencia",header:"Competencia"}),t(l(d),{field:"docente",header:"Docente"},{body:u(({data:s})=>[e("div",Fe,[e("div",null,_(s.docente),1)])]),_:1}),t(l(d),{field:"grupo",header:"Grupo"}),t(l(d),{field:"escuela",header:"Escuela Prof."}),t(l(d),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Estado",width:"70px"},{body:u(({data:s})=>[e("div",Ke,[s.estado===1?(v(),p("div",qe,[t(l(N),{severity:"info",value:"Activo"})])):m("",!0),s.estado===0?(v(),p("div",He,[t(l(N),{style:{background:"#CDCDCD"},value:"Inactivo"})])):m("",!0)])]),_:1}),t(l(d),{field:"id_programa",header:"Acciones",width:"90px"},{body:u(({data:s})=>[e("div",Re,[e("div",Xe,[t(l(f),{class:"secondary",icon:"pi pi-pencil","aria-label":"Submit",onClick:R=>ae(s),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])]),t(l(f),{icon:"pi pi-trash",severity:"danger","aria-label":"Submit",onClick:R=>ue(R,s),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value"])])])):m("",!0),r.value!==null&&c.value!==null?(v(),p("div",Ze,[e("div",Je,[t(l(f),{severity:"primary",onClick:a[6]||(a[6]=s=>de()),style:{height:"40px"}},{default:u(()=>[z(" Seleccionar ")]),_:1}),e("div",null,[e("div",Oe,[e("span",Qe,[We,t(l(D),{modelValue:V.value,"onUpdate:modelValue":a[7]||(a[7]=s=>V.value=s),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])])]),e("div",Ye,[t(l(U),{selectionMode:"single",value:F.value,class:A("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:u(()=>[t(l(d),{field:"dni",header:"DNI"}),t(l(d),{field:"nombres",header:"Nombres"}),t(l(d),{field:"paterno",header:"Paterno"}),t(l(d),{field:"materno",header:"Materno"}),t(l(d),{field:"curso",header:"Curso"}),t(l(d),{field:"nota",header:"Nota"}),t(l(d),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Condición",width:"70px"},{body:u(({data:s})=>[e("div",et,[s.nota>=10.5?(v(),p("div",tt,[t(l(N),{severity:"info",value:"Aprobado"})])):m("",!0),s.nota<=10.49?(v(),p("div",lt,[t(l(N),{severity:"danger",value:"Desprobado"})])):m("",!0)])]),_:1})]),_:1},8,["value"])])])):m("",!0),t(l(ye)),t(l(_e)),t(l(X),{visible:h.value,"onUpdate:visible":a[14]||(a[14]=s=>h.value=s),modal:"",header:i.value.id?"Editar Curso":"Curso nuevo",style:{width:"500px"}},{footer:u(()=>[e("div",wt,[e("div",null,[t(l(f),{label:"Cancelar",outlined:"",onClick:a[13]||(a[13]=s=>h.value=!1),size:"small"})]),t(l(f),{label:"Guardar",onClick:se,size:"small"})])]),default:u(()=>[e("div",at,[st,e("div",ot,[t(l(ge),{modelValue:i.value.estado,"onUpdate:modelValue":a[8]||(a[8]=s=>i.value.estado=s)},null,8,["modelValue"])])]),e("div",it,[e("div",nt,[dt,t(l(D),{style:{width:"100%",height:"40px"},type:"text",modelValue:i.value.nombre,"onUpdate:modelValue":a[9]||(a[9]=s=>i.value.nombre=s)},null,8,["modelValue"])]),e("div",ut,[rt,t(l(S),{modelValue:i.value.grupo,"onUpdate:modelValue":a[10]||(a[10]=s=>i.value.grupo=s),options:W.value,optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(s=>[e("div",ct,[e("div",null,_(s.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",pt,[e("div",vt,[mt,t(l(S),{modelValue:g.value,"onUpdate:modelValue":a[11]||(a[11]=s=>g.value=s),options:$.value,optionLabel:"label",optionValue:"value",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(s=>[e("div",ft,[e("div",null,_(s.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",ht,[e("div",yt,[_t,t(l(S),{modelValue:i.value.id_docente,"onUpdate:modelValue":a[12]||(a[12]=s=>i.value.id_docente=s),options:P.value,filter:"",optionLabel:"nombres",optionValue:"id",placeholder:"Selecciona una competencia",style:{width:"100%"},class:"w-full md:w-11rem"},{option:u(s=>[e("div",gt,[e("div",null,_(s.option.nombres),1)])]),_:1},8,["modelValue","options"])])])]),_:1},8,["visible","header"]),t(l(X),{visible:w.value,"onUpdate:visible":a[16]||(a[16]=s=>w.value=s),modal:"",header:"Asignar Alumnossssss",style:{width:"900px"}},{default:u(()=>[E.value?(v(),p("div",bt,[t(l(U),{selection:b.value,"onUpdate:selection":a[15]||(a[15]=s=>b.value=s),selectionMode:"multiple",dataKey:"id",metaKeySelection:!1,"row-selection":!1,value:E.value,class:A("p-datatable-sm"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"},paginator:!0,rows:9},{default:u(()=>[t(l(d),{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(l(d),{field:"programa",header:"Programa"}),t(l(d),{field:"dni",header:"DNI"}),t(l(d),{field:"nombres",header:"Nombres"}),t(l(d),{field:"paterno",header:"Paterno"}),t(l(d),{field:"materno",header:"Materno"})]),_:1},8,["selection","value"])])):m("",!0),e("div",xt,[t(l(f),{severity:"primary",style:{"font-size":"0.9rem"},text:"",onClick:oe},{default:u(()=>[z(" Asignar ")]),_:1})])]),_:1},8,["visible"])])]),_:1})],64))}};export{Ut as default};
