import{r as a,l as B,w as $,d as D,o as d,e,x as f,a5 as L,c as r,k as y,F as v,a6 as N,a as A,b as I,t as l}from"./app-a1cc6720.js";import{A as O}from"./LayoutSupervisor-eb721a4a.js";import{X as h}from"./xlsx-10b73f7a.js";import{a as P}from"./TopMenu-28dce342.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./NavigationMobile-896fdc4a.js";const V={class:"p-4",style:{background:"white"}},j={class:"flex justify-between mb-2"},z=e("label",{for:"programa"},"Programa de Estudio: ",-1),F=["value"],M=e("label",{for:"busqueda"},"Buscar por Nombre o DNI: ",-1),R={style:{"border-radius":"4px",width:"100%",overflow:"hidden"}},q=e("thead",{style:{height:"30px",color:"white","background-color":"var(--primary-color)",padding:"0px 10px"}},[e("tr",{style:{"font-size":".9rem"}},[e("th",{style:{border:"1px solid #d9d9d9"}},"DNI"),e("th",{style:{border:"1px solid #d9d9d9"}},"APELLIDOS Y NOMBRES"),e("th",{style:{border:"1px solid #d9d9d9"}},"PROGRAMA DE ESTUDIO"),e("th",{style:{border:"1px solid #d9d9d9"}},"INGRESO"),e("th",{style:{border:"1px solid #d9d9d9"}},"C1"),e("th",{style:{border:"1px solid #d9d9d9"}},"C2"),e("th",{style:{border:"1px solid #d9d9d9"}},"C3"),e("th",{style:{border:"1px solid #d9d9d9"}},"C4"),e("th",{style:{border:"1px solid #d9d9d9"}},"C5"),e("th",{style:{border:"1px solid #d9d9d9"}},"C6"),e("th",{style:{border:"1px solid #d9d9d9"}},"C7"),e("th",{style:{border:"1px solid #d9d9d9"}},"C8"),e("th",{style:{border:"1px solid #d9d9d9"}},"C9"),e("th",{style:{border:"1px solid #d9d9d9"}},"C10"),e("th",{style:{border:"1px solid #d9d9d9"}},"C11")])],-1),U={style:{border:"1px solid #d9d9d9","font-weight":".8rem","text-align":"center"}},X={class:"pl-1 pr-1"},G={style:{border:"1px solid #d9d9d9","font-weight":".7rem"}},T={class:"pl-1 pr-1"},Y={style:{border:"1px solid #d9d9d9","font-weight":".8rem","text-align":"center"}},H={class:"pl-1 pr-1"},J={style:{border:"1px solid #d9d9d9","font-weight":".8rem","text-align":"center"}},K={class:"pl-1 pr-1"},Q={key:0,style:{"text-align":"center"}},W={key:0},Z={key:1},ee=e("span",{style:{"font-size":".9rem"}},null,-1),te=[ee],se={key:1,style:{"text-align":"center"}},ue={__name:"index",setup(oe){function i(s,o){for(var t=0;t<s.length;t++)if(s[t].competencia===o)return t;return null}const m=a(1),_=a([]),x=a([]),u=a([]),p=a(""),c=a(""),g=a([]),w=async()=>{let s=await D.get("notasperf-supervisor?page="+m.value,{term:""});_.value=s.data.datos,C(),u.value.length>0&&(p.value=u.value[0],b())},C=()=>{const s=new Set;_.value.forEach(o=>{s.add(o.programa)}),u.value=Array.from(s)},b=()=>{x.value=_.value.filter(s=>s.programa===p.value&&(s.dni.includes(c.value)||`${s.paterno} ${s.materno} ${s.nombre}`.toLowerCase().includes(c.value.toLowerCase()))),k()},k=()=>{g.value=x.value.map(s=>{const o={dni:s.dni,programa:s.programa,semestre:s.semestre,nombreCompleto:`${s.paterno} ${s.materno},  ${s.nombre}`};for(let t=1;t<=11;t++){const n=i(s.notas,t);n!==null?o[`C${t}`]=s.notas[n].nota:o[`C${t}`]="--"}return o})},E=()=>{const s=h.utils.json_to_sheet(g.value),o=h.utils.book_new();h.utils.book_append_sheet(o,s,"Estudiantes"),h.writeFile(o,"estudiantes.xlsx")};return w(),(s,o)=>(d(),B(O,null,{default:$(()=>[e("div",V,[e("div",j,[e("div",null,[z,f(e("select",{id:"programa","onUpdate:modelValue":o[0]||(o[0]=t=>p.value=t),onChange:b},[(d(!0),r(v,null,y(u.value,t=>(d(),r("option",{key:t,value:t},l(t),9,F))),128))],544),[[L,p.value]])]),e("div",null,[M,f(e("input",{id:"busqueda","onUpdate:modelValue":o[1]||(o[1]=t=>c.value=t),onInput:b,type:"text",placeholder:"Buscar..."},null,544),[[N,c.value]])]),A(I(P),{label:"Exportar excel",onClick:E,size:"small",style:{height:"40px"}})]),e("table",R,[q,e("tbody",null,[(d(!0),r(v,null,y(x.value,t=>(d(),r("tr",{key:t.id,style:{"font-size":".9rem"}},[e("td",U,[e("div",X,l(t.dni),1)]),e("td",G,[e("div",T,l(t.paterno)+" "+l(t.materno)+", "+l(t.nombre),1)]),e("td",Y,[e("div",H,l(t.programa),1)]),e("td",J,[e("div",K,l(t.semestre),1)]),(d(),r(v,null,y(11,(n,S)=>e("td",{key:S,style:{border:"1px solid #d9d9d9","min-width":"40px"}},[i(t.notas,n)!==null?(d(),r("div",Q,[t.notas[i(t.notas,n)]?(d(),r("div",W,l(t.notas[i(t.notas,n)].nota),1)):(d(),r("div",Z,te))])):(d(),r("div",se," - - "))])),64))]))),128))])])])]),_:1}))}};export{ue as default};
