import{A as P}from"./LayoutDocente-5aa15a18.js";import{u as T,r as u,i as x,c as d,a as s,b as l,w as r,F as D,o as n,Z as G,d as a,f as L,t as b,g as m,n as j,j as H,k as X}from"./app-bda8b2ad.js";import{s as N,a as p,c as Z}from"./column.esm-c04ef87c.js";import{a as h,s as q,b as A}from"./TopMenu-33ebf2ff.js";import{s as y}from"./tag.esm-93a05b98.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./NavigationMobile-f9820f46.js";const J={class:"flex",style:{background:"white","border-bottom":"1px solid #CDCDCD"}},K={key:0,class:"flex justify-content-center",style:{"align-items":"center"}},O=a("i",{class:"pi pi-angle-right"},null,-1),Q={style:{"max-width":"180px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},R={class:"bg-white shadow-xs p-4",style:{height:"calc(100vh - 110px)","font-family":"Arial, Helvetica, sans-serif"}},W={key:0},Y={class:"flex",style:{"justify-content":"flex-end"}},ee={class:"p-input-icon-left"},te=a("i",{class:"pi pi-search"},null,-1),se={class:"card"},le={class:"flex",style:{"justify-content":"center"}},ae={key:0},oe={key:1},ie={class:"flex"},ne={key:1},de={class:"flex mb-3",style:{"justify-content":"space-between"}},re={class:"p-input-icon-left"},ce=a("i",{class:"pi pi-search"},null,-1),ue={class:"card p-fluid"},pe={class:"flex justify-center"},me={key:0,style:{display:"flex","justify-content":"center"}},fe={key:1},ve={key:0,class:"flex justify-center"},he={key:1,class:"flex justify-center"},Ve={__name:"cursos",setup(ye){const $=T();u(null);const g=u(1),f=u(""),w=u([]),c=u(null),k=u(null),C=u([]),v=u(""),V=async o=>{let t=await axios.post("/docente/get-cursos?page="+g.value,{term:f.value});w.value=t.data.datos.data},E=async(o,t)=>{let e=await axios.post("/docente/update-nota",{id_detallecurso:o,nota:t});_(),B(e.data.tipo,e.data.titulo,e.data.mensaje)},_=async()=>{let o=await axios.post("/docente/get-alumnos-curso?page="+g.value,{term:v.value,curso:c.value.id});C.value=o.data.datos.data},F=()=>{c.value=null},I=async()=>{window.open("/docente/generar-pdf/"+c.value.id,"_blank")};x(f,(o,t)=>{V()}),x(c,(o,t)=>{_()}),x(v,(o,t)=>{_()}),V();const S=u([{field:"dni",header:"DNI"},{field:"nombres",header:"Nombres"},{field:"paterno",header:"Paterno"},{field:"materno",header:"Materno"}]),U=o=>{let{data:t,newValue:e,field:i}=o;switch(E(t.id,e),i){case"nota":case"nota":z(e)?t[i]=e:o.preventDefault();break;default:e.trim().length>0?t[i]=e:o.preventDefault();break}},z=o=>{let t=String(o);t=t.trim();var e=Math.floor(Number(t));return e>=0},B=(o,t,e)=>{$.add({severity:o,summary:t,detail:e,life:3e3})};return(o,t)=>(n(),d(D,null,[s(l(G),{title:"Cursos"}),s(P,null,{default:r(()=>[a("div",J,[s(l(h),{severity:"secondary",style:{"font-size":"0.9rem"},text:"",onClick:F},{default:r(()=>[L(" Inicio ")]),_:1}),c.value!==null?(n(),d("div",K,[O,s(l(h),{severity:"secondary",onClick:o.resEsuela,style:{"font-size":"0.9rem"},text:""},{default:r(()=>[a("div",Q,[a("span",null,b(c.value.nombre),1)])]),_:1},8,["onClick"])])):m("",!0)]),a("div",R,[s(l(q)),c.value===null?(n(),d("div",W,[a("div",null,[a("div",Y,[a("span",ee,[te,s(l(A),{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),style:{"padding-left":"40px",height:"40px"},placeholder:"Search"},null,8,["modelValue"])])])]),a("div",null,[a("div",se,[s(l(N),{selectionMode:"single",selection:c.value,"onUpdate:selection":t[1]||(t[1]=e=>c.value=e),value:w.value,class:j("p-datatable-sm mt-4"),tableStyle:"min-width: 50rem",style:{"font-size":".9rem"}},{default:r(()=>[s(l(p),{field:"nombre",header:"Curso"}),s(l(p),{field:"grupo",header:"Grupo"}),s(l(p),{field:"escuela",header:"Escuela"}),s(l(p),{field:"estado",style:{"justify-content":"center",display:"flex"},header:"Estado",width:"70px"},{body:r(({data:e})=>[a("div",le,[e.estado===1?(n(),d("div",ae,[s(l(y),{severity:"info",value:"Activo"})])):m("",!0),e.estado===0?(n(),d("div",oe,[s(l(y),{style:{background:"#CDCDCD"},value:"Inactivo"})])):m("",!0)])]),_:1}),s(l(p),{field:"id_programa",header:"Acciones",width:"90px"},{body:r(({data:e})=>[a("div",ie,[s(l(h),{class:"",severity:"help",icon:"pi pi-eye","aria-label":"Submit",onClick:i=>o.editar(e),size:"small",style:{width:"25px",height:"25px"}},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value"])])])])):m("",!0),c.value!=null?(n(),d("div",ne,[a("div",null,[a("div",de,[a("div",null,[s(l(h),{onClick:t[2]||(t[2]=e=>I()),label:"Generar PDF"})]),a("span",re,[ce,s(l(A),{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=e=>v.value=e),style:{"padding-left":"40px",height:"40px"},placeholder:"Buscar"},null,8,["modelValue"])])])]),a("div",ue,[s(l(N),{value:C.value,class:j("p-datatable-sm mt-4"),selectionMode:"single",selection:k.value,"onUpdate:selection":t[4]||(t[4]=e=>k.value=e),editMode:"cell",onCellEditComplete:U,tableStyle:"min-width: 50rem"},{default:r(()=>[(n(!0),d(D,null,H(S.value,e=>(n(),X(l(p),{key:e.field,field:e.field,header:e.header,style:{width:"25%"}},null,8,["field","header"]))),128)),s(l(p),{field:"ant",header:"N_Ant"},{body:r(({data:e})=>[a("div",pe,b(e.ant),1)]),_:1}),s(l(p),{field:"nota",header:"Nota"},{editor:r(({data:e,field:i})=>[s(l(Z),{style:{width:"100px"},modelValue:e[i],"onUpdate:modelValue":M=>e[i]=M,inputId:"minmaxfraction",max:20,min:0,maxFractionDigits:2,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]),body:r(({data:e,field:i})=>[e[i]===null||e[i]===""||e[i]===0?(n(),d("div",me," - ")):(n(),d("div",fe,b(Number(e[i]).toFixed(2)),1))]),_:1}),s(l(p),{field:"id_programa",header:"CondiciÃ³n"},{body:r(({data:e})=>[e.condicion===1?(n(),d("div",ve,[s(l(y),{severity:"info",value:"Aprobado"})])):m("",!0),e.condicion===0?(n(),d("div",he,[s(l(y),{severity:"danger",value:"Desaprobado"})])):m("",!0)]),_:1})]),_:1},8,["value","selection"])])])):m("",!0)])]),_:1})],64))}};export{Ve as default};
